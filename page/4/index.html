<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-mongoDB" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/mongoDB/" class="article-date">
  <time datetime="2017-03-03T11:20:16.287Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/03/mongoDB/">mongoDB 的使用和学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li>安装前应该修补win7bug，下载Windows 7/Windows Server2008 R2 SP1</li>
<li><a href="http://www.myfiles.com.cn/soft/0/131.htm" target="_blank" rel="external">下载地址</a></li>
<li><p>由于文件过大，算了，直接使用，如果需要，安装在linux即可</p>
</li>
<li><p>ubuntu 下二进制安装.<a href="https://docs.mongodb.org/getting-started/shell/installation/" target="_blank" rel="external">官网</a></p>
</li>
<li>curl -o /url/to/download </li>
<li>tar zxvf 解已经存在压</li>
<li>export PATH=<mongodb-install-directory>/bin:$PATH   //添加环境变量</mongodb-install-directory></li>
<li>mkdit /data/db</li>
<li>mongod –dbpath <path to="" data="" directory=""></path>  // 指定数据的保存路径启动mogondb/</li>
</ol>
<h3 id="引入文件到数据库中"><a href="#引入文件到数据库中" class="headerlink" title="引入文件到数据库中"></a>引入文件到数据库中</h3><h4 id="检索数据集-restaurants-data"><a href="#检索数据集-restaurants-data" class="headerlink" title="检索数据集 restaurants data"></a>检索数据集 restaurants data</h4><ol>
<li>下载实例文件到本地 wget /http/.json<h4 id="引入本地文件到数据库"><a href="#引入本地文件到数据库" class="headerlink" title="引入本地文件到数据库"></a>引入本地文件到数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoimport --db test --collection restaurants --drop --file primer-dataset.json</div></pre></td></tr></table></figure>
</li>
</ol>
<p>mongoimport 命令，还可以指定要连接md数据库的端口和地址，默认为本地和port</p>
<ol>
<li>primer-dataset.json,为本地文件路径</li>
<li>test 为数据库名，</li>
<li>restaurants 类似一个数据表 collection, 是一个类似数据表的结构</li>
<li>–drop ,删除，也就是如果存在就不保存了</li>
</ol>
<h3 id="使用md的shell客户端"><a href="#使用md的shell客户端" class="headerlink" title="使用md的shell客户端"></a>使用md的shell客户端</h3><h4 id="mongo-是自带的js本地客户端，可以像shell和emacs一样使用tab补全，和查看历史"><a href="#mongo-是自带的js本地客户端，可以像shell和emacs一样使用tab补全，和查看历史" class="headerlink" title="mongo 是自带的js本地客户端，可以像shell和emacs一样使用tab补全，和查看历史"></a>mongo 是自带的js本地客户端，可以像shell和emacs一样使用tab补全，和查看历史</h4><h4 id="help-在mongo下type-help可以查看帮助"><a href="#help-在mongo下type-help可以查看帮助" class="headerlink" title="help ,在mongo下type help可以查看帮助"></a>help ,在mongo下type help可以查看帮助</h4><h3 id="collection-所有数据在md中都有一个scope-附在单一的collection上"><a href="#collection-所有数据在md中都有一个scope-附在单一的collection上" class="headerlink" title="collection ,所有数据在md中都有一个scope,附在单一的collection上"></a>collection ,所有数据在md中都有一个scope,附在单一的collection上</h3><h4 id="collecton-相当于一个文件名，文件名内保存着所有属于该文件的数据，想象md就是一个庞大的键值"><a href="#collecton-相当于一个文件名，文件名内保存着所有属于该文件的数据，想象md就是一个庞大的键值" class="headerlink" title="collecton ,相当于一个文件名，文件名内保存着所有属于该文件的数据，想象md就是一个庞大的键值"></a>collecton ,相当于一个文件名，文件名内保存着所有属于该文件的数据，想象md就是一个庞大的键值</h4><p>对应，每个数据库有多个collection，每个collection都是主scope，所有scope下的数据就是该colletion的</p>
<h4 id="collection-集合，有点类似有序数组，但里面是json值"><a href="#collection-集合，有点类似有序数组，但里面是json值" class="headerlink" title="collection ,集合，有点类似有序数组，但里面是json值"></a>collection ,集合，有点类似有序数组，但里面是json值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">db.restaurants.find() //查询restaurants 这个collection下的所有数据</div><div class="line"></div><div class="line">### 索引的原理与应用</div><div class="line"></div><div class="line">1. 索引就像一本词典的形式，当我们拿到一个单词word，需要查找它在哪一页，这时，就需要查看目录，也就是根据单词的首字母来一个个逐一确定它在哪</div><div class="line">2. 在储存器中，所有数据都是用单元来表示的，在物理结构上，每一个单元都是独立，也就是同一份文件，在储存器中保存可以有很多个块组成，只是，每个快的尾都连着下一个块的首的地址，所以就能通过找到第一个快的地址来找出整个文件的内容</div><div class="line">3. 对于电脑来说，知道了地址就等于知道了一切，获取某一个地址的内容，只需要一步</div><div class="line">4. 在数据库中，每一个库都有一个统一的片单元，比如是1024字节，每一个表的每一行都有一个数据类型，每一个类型都有一个确定的大小，假如一行有5个字段，每一个字段平均是50字节，那么一行就需要250个字节，那么数据库的一个片就可以得到4到5行数据。如果有1000行数据，就需要200个块</div><div class="line">5. 也就是说，如果需要查找出现name = lumin 的这一行，需要查找200个数据块，如果是按顺序来找的话，就需要200次</div><div class="line">6. 建立索引，就是在name 一个字段上，建立一个到字段为排序后的name值和该name所在行地址的新的索引表，当要查询时候，因为已经排序了，(在电脑中，任何文字符号都是ASCI码),都可以进行排序，就可以用二分法查询，即从中间开始，比较要查的在哪一边，然后继续向下查找，也就是2叉树，一共要查log2 200,次，等于8次不到，当数据量很大时候，这个就更明显了</div><div class="line">7. 建立索引的关键是排序与唯一，但是每次有新的插入，索引就会发生变化，有时候变化很大，这个需要时间的，但好处是，查询性能高</div><div class="line">8. These indexes allow applications to store a view of a portion of the collection in an efficient data structure.</div><div class="line"></div><div class="line"></div><div class="line">### mongoDB的优点	 </div><div class="line">1. 键值架构，相当于json的扩展，值可以是数组，甚至是嵌入的文档，</div><div class="line">2. 强大的可伸缩性，数据很容易部署在主从，副本服务器上，还有读写分离等</div><div class="line"></div><div class="line">### 两大要素</div><div class="line">1. 集合对应表</div><div class="line">2. 文档(document)对应行</div><div class="line"></div><div class="line">### 读操作</div><div class="line">1. md读取检索数据从一个单一的colletion</div><div class="line">2. 一个查询就相当于一个映射projection，映射对应要查文档中的指定域fields,这个映射决定了从collection中取出哪几个字段fields</div><div class="line">3. 查询情况条件，就是criteria</div><div class="line">4. 通过设定criteria 和projection 两个限定，就可以得到想要的数据</div><div class="line">5. 查询后返回一个cursor，可以通过cursor设定limit，也就是限定多少条拿出来，这种操作称为modify,</div><div class="line"></div><div class="line">#### db.collection.find( &#123; age: &#123; $gt: 18 &#125; &#125;, &#123; name: 1, address: 1 &#125; ).limit(5)  </div><div class="line">1. find() 有两个参数，一个是criteria ,一个是projection, 最后返回cursor给limit，skips,sort orders 使用</div><div class="line">2. &#123; name:1 ,address:1 &#125; ,表示拿出这两个fields，若_id:0 ,则不取出id</div><div class="line"></div><div class="line">#### de.collection.update(&#123;&apos;name&apos;:&apos;value&apos;&#125; , &#123;&apos;update document associate to name:value&apos;&#125;);</div><div class="line">1. 整体更新，var model= db.collection.findOne(&#123;&apos;criteria&apos;&#125;); model.name=&apos;value&apos;; --.update(&#123;&apos;criteria&apos;&#125;,model);  //这种更新不仅可以更新原有 fields，还可以加入新的fields</div><div class="line">2. 局部更新 ,db.col.update(&#123;&apos;criteria&apos;&#125; , &#123;$inc:&#123;age:10&#125;&#125;) 可以原子操作;</div><div class="line">	2.1 $set 局部修改, db.col.update(&#123;&apos;criteria&apos;&#125; , &#123;$set:&#123;&apos;newfield&apos;:&apos;value&apos;&#125;&#125;);</div><div class="line"></div><div class="line">3.upseted ,当没有满足update的查询情况的时候，就新增, 改第三个参数为 true</div><div class="line">	db.user.update(&#123;&apos;name&apos;:&apos;waite&apos;&#125;,&#123;$set:&#123;&apos;age&apos;:3443&#125;&#125;,true)</div><div class="line">4. </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#### db.collection.insert(&#123;&apos;name&apos;:&apos;new document associate to this collection&apos;&#125;);</div><div class="line"></div><div class="line">#### 索引</div></pre></td></tr></table></figure>
<p>function go() {<br>    for(var i=0;i<1000;i++) {="" db.person.insert({'name':'lumin'+i="" ,="" 'age'="" :="" i});="" }="" <figure="" class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">1. 上面的记录很多十万条，连插入的时候，在服务器上测试了很久，还是没插入成</div><div class="line">2. 为一个fields 为name 建立索引，db.col.ensureIndex(&#123;&apos;name&apos;:1&#125;);</div><div class="line">3. 建立唯一索引，唯一索引要求该fields中的值不能重复</div><div class="line">	db.person.ensureIndex(&#123;&quot;name&quot;:1&#125;,&#123;&quot;unique&quot;:true&#125;)</div><div class="line">4. 建立组合索引，对于多条件查询，比如查询90年 出生的name同学，可以在年龄和name两个field间建立组合索引</div><div class="line">	db.person.ensureIndex(&#123;&apos;name&apos;:1,&apos;birthday&apos;:1&#125;)</div><div class="line">	db.person.ensureIndex(&#123;&apos;birthday&apos;:1, &apos;name&apos;:1&#125;)</div><div class="line">	这里会产生两个索引，因为两个字段的排序，</div><div class="line">5. 删除索引 </div><div class="line">#### [索引参考,博客](http://www.cnblogs.com/huangxincheng/archive/2012/02/29/2372699.html)</div><div class="line"></div><div class="line"></div><div class="line">### source 安装，需要scons</div><div class="line">1. scons是一个现代化的有依赖管理能力的替代make的一个编译工作，用python编写，需要python2.7</div><div class="line">2. scons 安装及下载[官网](http://sourceforge.net/projects/scons/files/scons/2.4.1/)</div><div class="line">3. scons all //安装全部组件，包括mongo mongos mongod</div><div class="line">4. scons</div></pre></td></tr></table></1000;i++)></p>
<p>use test<br>// 查找所有<br>db.restaurants.find()<br>// 查找拥有指定域和指定值<br>db.restaurants.find( { “borough”: “Manhattan” } )<br>// 多级查找<br>db.restaurants.find( { “address.zipcode”: “10075” } )<br>// 类似</p>
<p>{<br>“grades” : [</p>
<pre><code>   {
      &quot;date&quot; : ISODate(&quot;2014-10-01T00:00:00Z&quot;),
      &quot;grade&quot; : &quot;A&quot;,
      &quot;score&quot; : 11
   },
   {
      &quot;date&quot; : ISODate(&quot;2014-01-16T00:00:00Z&quot;),
      &quot;grade&quot; : &quot;B&quot;,
      &quot;score&quot; : 17
   }
]
</code></pre><p>}<br>//即有内嵌数组，数组里面任然是文档,直接如下，得到拥有b的所有级别（只要有数组的内嵌文档有一行拥有即可）</p>
<p>db.restaurants.find( { “grades.grade”: “B” } )</p>
<p>// 指定查询运算条件<br>{ <field1>: { <operator1>: <value1> } }<br>// 查找拥有大于30的内嵌文档<br>db.restaurants.find( { “grades.score”: { $gt: 30 } } )<br>db.restaurants.find( { “grades.score”: { $lt: 10 } } )</value1></operator1></field1></p>
<p>// 多条件查询，与<br>db.restaurants.find( { “cuisine”: “Italian”, “address.zipcode”: “10075” } )</p>
<p>db.restaurants.find(<br>   { $or: [ { “cuisine”: “Italian” }, { “address.zipcode”: “10075” } ] }<br>)</p>
<p>// 排序<br>db.restaurants.find().sort( { “borough”: 1, “address.zipcode”: 1 } )</p>
<p>// 更新，默认只更新一条，可以加入参数更新多条符合条件的文档<br>db.restaurants.update(<br>    { “name” : “Juni” },<br>    {<br>      $set: { “cuisine”: “American (New)” },<br>      $currentDate: { “lastModified”: true }<br>    }<br>)</p>
<p>db.restaurants.update(<br>  { “restaurant_id” : “41156888” },<br>  { $set: { “address.street”: “East 31st Street” } }<br>)</p>
<p>db.restaurants.update(<br>  { “address.zipcode”: “10016”, cuisine: “Other” },<br>  {<br>    $set: { cuisine: “Category To Be Determined” },<br>    $currentDate: { “lastModified”: true }<br>  },<br>  { multi: true}<br>)</p>
<p>// 每个集合内的每行文档相互独立，没有严格的key value格式限定，但是每一行文档的id是不变得<br>// 更新整个行，这里整个行的文档的格式会变成以下<br>db.restaurants.update(<br>   { “restaurant_id” : “41704620” },<br>   {<br>     “name” : “Vella 2”,<br>     “address” : {<br>              “coord” : [ -73.9557413, 40.7720266 ],<br>              “building” : “1480”,<br>              “street” : “2 Avenue”,<br>              “zipcode” : “10075”<br>     }<br>   },<br>//   { upsert: true } ,指定为true后，如果能找到匹配的就完全更新，否则插入新的一行文档<br>)</p>
<p>// 删除所有符合条件<br>db.restaurants.remove( { “borough”: “Manhattan” } )<br>//只删除一行符合条件<br>db.restaurants.remove( { “borough”: “Queens” }, { justOne: true } )<br>//操作成功后返回如下对象<br>WriteResult({ “nRemoved” : 1 })</p>
<p>//删除整个集合 的所有文档,但仍有剩余<br>db.restaurants.remove( { } )<br>The collection itself, as well as any indexes for the collection, remain.</p>
<p>// 彻底删除<br>db.restaurants.drop() 返回true</p>
<p>In MongoDB, write operations are atomic on the level of a single document. If a single remove operation removes multiple documents from a collection, the operation can interleave with other write operations on that collection. In the MongoDB Manual, see Atomicity.</p>
<p>// 聚合，聚合是指分组，类似管道的操作</p>
<p>// 每个stage相当于一个管道，前面的管道执行结果作为后一个管道的输入<br>db.collection.aggregate( [ <stage1>, <stage2>, … ] )</stage2></stage1></p>
<p>// 将集合的文档行按照borough字段的值分组，并排序,输出会得到_id和count(count字段不一定要在文档行中，应该是统计后的输出字段)字段<br>db.restaurants.aggregate(<br>   [<br>     { $group: { “_id”: “$borough”, “count”: { $sum: 1 } } }<br>   ]<br>);</p>
<p>// 先限定查询条件，再聚合处理（分组、统计）<br>db.restaurants.aggregate(<br>   [<br>     { $match: { “borough”: “Queens”, “cuisine”: “Brazilian” } },<br>     { $group: { “_id”: “$address.zipcode” , “count”: { $sum: 1 } } }<br>   ]<br>);</p>
<p>// 索引,每个集合自动有_id字段，而且拥有递增索引</p>
<p>// 为集合某一个字段新增一个索引<br>db.restaurants.createIndex( { “cuisine”: 1 } )</p>
<p>// 结果为<br>{<br>  “createdCollectionAutomatically” : false,<br>  “numIndexesBefore” : 1,<br>  “numIndexesAfter” : 2, //说明新增后集合中有两个索引<br>  “ok” : 1<br>}</p>
<p>// 增加复合索引<br>// 为一个字段增加递增，另一个增加递减的复合索引<br>db.restaurants.createIndex( { “cuisine”: 1, “address.zipcode”: -1 } )<br>```</p>
<h4 id="mongo的clients-负责连接到单一个的mongoDB实例，或者副本实例，或者分片集群中"><a href="#mongo的clients-负责连接到单一个的mongoDB实例，或者副本实例，或者分片集群中" class="headerlink" title="mongo的clients, 负责连接到单一个的mongoDB实例，或者副本实例，或者分片集群中"></a>mongo的clients, 负责连接到单一个的mongoDB实例，或者副本实例，或者分片集群中</h4><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>原子操作类似事务，有利于保证数据的插入和完整性</p>
<ol>
<li>创建数据库 use my_db,如果没有，则新建,</li>
<li>db 查看当前数据库</li>
<li>show dbs 查看所有数据库,如果一个新建数据库是空的，则不显示</li>
<li>db.dropDatabase() 删除当前数据库,删除后，仍然处于当前数据库，只是数据为空，所以不显示</li>
<li>插入mongodb的原始数据是 json，但是实际储存是BSON, 它是一种类json的二进制形式</li>
<li>更新，db.col.update( { “count” : { $gt : 1 } } , { $set : { “test2” : “OK”} } ) , $set为原子操作符，如果原集合中存在该文档对应的key “test2”则更新,如果没有该字段，不做任何</li>
<li>更新中如果用 db.col.update( { “count” : { $gt : 5 } } , { $set : { “test5” : “OK”} },true,true ); ,后面两ture指的是 upsert  <boolean> , multi: <boolean>,,upsert为真如果匹配不成功，则新增一行文档，multi为真则是可以同时修改多行匹配条件的</boolean></boolean></li>
<li>db.col.save({‘name’: ‘value’}) 新增一行文档</li>
<li>db.col.save({‘_id’: objectId(‘fkdsjf’)}, ‘something’: ‘new’) 如果save方法指定了_id则会在该行文档修改<br>db.col.update({‘name’: ‘v’} , {‘some’: ‘new’}) 这里会直接替换掉匹配的行，因为没有了$set的原子操作，所以会更新</li>
<li>db.col.update( { “count” : { $gt : 10 } } , { $inc : { “count” : 1} },false,false ); $inc为数字类型数据的原子操作</li>
<li>db.col.find().pretty() 以漂亮的格式显示查询结果 </li>
<li>and or的联合使用db.col.find({“somekey”: {$gt:50}, $or: [{“by”: “菜鸟教程”},{“title”: “MongoDB 教程”}]}).pretty()</li>
<li>db.col.find({likes : {$lt :200, $gt : 100}}) ,查找大于100小于200</li>
<li>$type操作符，丰富了查询的限定条件，$type的值代表着某个字段的值得数据类型，如$type: 1代表着Double类型db.col.find({“title” : {$type : 2}}), string类型</li>
<li>db.col.find({},{“title”:1,_id:0}).limit(2)  限定只得到两条河条件的数据</li>
<li>db.col.find({},{“title”:1,_id:0}).limit(1).skip(1)  跳过符合条件的第一条数据，这里将获得第二条 （应该是按照插入顺序，即_id排序)</li>
<li>db.col.find({},{“title”:1,_id:0}).sort({“likes”:-1}) , 查询结果只显示title字段， _id如果不手动设定为0都会附带的, sort方法这里按照 likes (-1降序排序</li>
<li><p>db.values.ensureIndex({open: 1, close: 1}, {background: true}) . 创建复合索引，并加参数在后台运行（不阻塞进程)</p>
</li>
<li><p>db.posts.find({post_text:{$regex:”w3cschool.cc”,$options:”$i”}}) 正则表达式的查找，设定$i为忽略大小写</p>
</li>
<li>db.posts.find({tags:{$regex:”tutorial”}}) ,tags字段的内容为数组，可以查找拥有tutorial的标签的数据</li>
<li>title:eval(“/“+title+”/i”)    // 等同于 title:{$regex:title,$Option:”$i”} 类似模糊查询</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/mongoDB/" data-id="cizut7q3q000zt4ddqiu5m1zo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-learnAndsearch" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/learnAndsearch/" class="article-date">
  <time datetime="2017-03-03T11:20:16.286Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="这里讲述了一些搜索和学习的方法"><a href="#这里讲述了一些搜索和学习的方法" class="headerlink" title="这里讲述了一些搜索和学习的方法"></a>这里讲述了一些搜索和学习的方法</h4><ol>
<li>包的仓库网</li>
<li>包的官网</li>
<li>谷歌</li>
<li>百度</li>
<li>github</li>
<li>包的官网</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/learnAndsearch/" data-id="cizut7q3g000ut4ddwws9uefj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-laravel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/laravel/" class="article-date">
  <time datetime="2017-03-03T11:20:16.285Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="laravel-的深入学习与创建一个完整的blog"><a href="#laravel-的深入学习与创建一个完整的blog" class="headerlink" title="laravel 的深入学习与创建一个完整的blog"></a>laravel 的深入学习与创建一个完整的blog</h2><hr>
<h3 id="session-cookie"><a href="#session-cookie" class="headerlink" title="session,cookie"></a>session,cookie</h3><p>为何有session和cookie这两样东西，为了客户端与服务器之间保留着互相信任的东西，就像两个陌生人变成熟人，为了防止下次还认识，互相交换信物一样</p>
<p><em>请求重定向后，session会丢失</em></p>
<p>cookie 保留在客户端和服务器之间，因为每个客户端都有一个唯一的加密cookie ,所以不用与ip绑定即可，服务器上可以在数据库中保留，如reminde me 的字段</p>
<p>session 仅仅保留在服务器，因为没有保留在客户端，所以为了区别每个客户端的 session，它是与ip绑定的</p>
<p>在实际使用中，关键session值(如_csrf_token)不仅保留在服务器，还以cookie 形式保留在客户端,并且每次都会更新</p>
<h3>上面的想法似乎错了， laravel的session是动态的，也就是每次请求都告诉客户端更新session，然后再次请求要提交该session，所以不用绑定ip，增加了可靠性，确保两次请求都是同一个客户端发来的，而cookie是浏览器保留服务器密码的一种方法，它可以保存并实时更新提交动态session，也可以保留 remenber token，可以与数据库里面的对应，从而达到了后期无密码登录的目的</h3>

<p>然而仅仅绑定ip并没有达到安全的要求，如，如果客户端修改ip欺骗服务器，那就完了，所以还有一些动态的交换密码，每一次请求来临，给客户端多附加一个隐藏域即 token码，token码同时也保留在服务器上，通过多重检查，也就可以确定是这个客户的请求了，同时通过session还可以保留着客户的登录的状态，只要session值没有被销毁，说明客户端还在登录状态</p>
<p>总之一个客户端对应一个session,读取或者session时，基本功能是对该客户端的session操作，应该有方法可以看到当前登录的所有用户sessions数组</p>
<h4 id="laravel的基本用法和流程"><a href="#laravel的基本用法和流程" class="headerlink" title="laravel的基本用法和流程"></a>laravel的基本用法和流程</h4><h4 id="by-lumin-25-02-2016"><a href="#by-lumin-25-02-2016" class="headerlink" title="by lumin  25.02.2016"></a>by lumin  25.02.2016</h4><p>永远要记得查看这里日记</p>
<hr>
<p>routes.php, views, controler, database/migrate</p>
<ol>
<li><p>数据库准备操作，如，创建表结构等.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">php artisan make:migration &apos;dosomething like update_a_table&apos;</div><div class="line"></div><div class="line">php artisan migrate</div><div class="line"></div><div class="line">php artisan make:model some</div></pre></td></tr></table></figure>
</li>
<li><p>定义路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Route::get(&apos;/&apos;, function() &#123;</div><div class="line">	return view()-&gt;withTitle(&apos;&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Route::get(&apos;user/&#123;id&#125;&apos;, function($id)</div><div class="line">&#123;</div><div class="line">    return &apos;User &apos;.$id;</div><div class="line">&#125;)-&gt;where(&apos;id&apos;, &apos;[0-9]+&apos;);</div></pre></td></tr></table></figure>
</li>
<li><p>控制器 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">// 带命名空间的controller, 在Controllers的子目录Photos目录下</div><div class="line">Route::get(&apos;foo&apos;, &apos;Photos\AdminController@method&apos;);</div><div class="line">// 带控制器中间件</div><div class="line">Route::get(&apos;profile&apos;, [</div><div class="line">    &apos;middleware&apos; =&gt; &apos;auth&apos;, //中间件</div><div class="line">    &apos;uses&apos; =&gt; &apos;UserController@showProfile&apos; //控制器</div><div class="line">]);</div><div class="line">// 也可以在该控制器的构造函数内指定</div><div class="line">public function __construct()</div><div class="line">    &#123;</div><div class="line">        $this-&gt;middleware(&apos;auth&apos;);</div><div class="line"></div><div class="line">        $this-&gt;middleware(&apos;log&apos;, [&apos;only&apos; =&gt; [&apos;fooAction&apos;, &apos;barAction&apos;]]);</div><div class="line"></div><div class="line">        $this-&gt;middleware(&apos;subscribed&apos;, [&apos;except&apos; =&gt; [&apos;fooAction&apos;, &apos;barAction&apos;]]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// 隐式控制器</div><div class="line">// users是路由url前缀，所有的url规则对应控制器内的方法 ,简化定义普通路由的方法</div><div class="line">Route::controller(&apos;users&apos;, &apos;UserController&apos;); </div><div class="line">get: url =&gt; users/admin-profile对应</div><div class="line">public function getAdminProfile() &#123;&#125;</div><div class="line">// 此外</div><div class="line"></div><div class="line"> public function postProfile()</div><div class="line">    &#123;</div><div class="line">        //</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function anyLogin()</div><div class="line">    &#123;</div><div class="line">        //</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// restful 资源控制器，主要处理查改增删</div><div class="line">命令生成控制器php artisan make:controller PhotoController</div><div class="line"></div><div class="line">路由配置: Route::resource(&apos;photo&apos;, &apos;PhotoController&apos;);</div><div class="line">// 对应</div><div class="line">get: /photo index() //获取最初列表</div><div class="line">get: /photo/create create() // 获取一个新增photo的表单</div><div class="line">Post: /photo store() // store() 保存新增的photo表单</div><div class="line">get: /photo/&#123;photo&#125; // show() 显示固定id的photo</div><div class="line">get: /photo/&#123;photo&#125;/edit edit() 获取编辑一个photo的页面</div><div class="line">put: /photo/&#123;photo&#125;  update() //修改更新指定的photo ,当提交表单带有&#123;input name=&quot;_put&quot;&#125;字段，会认为该表单以put方法提交(请求中含有该字段也是一样)</div><div class="line">delete: /photo/&#123;photo&#125; destroy() 删除</div><div class="line"></div><div class="line">&#123;photo&#125;是路由参数，可以在控制器中直接获得</div><div class="line">// 在依赖之后获取该路由的参数</div><div class="line"> public function update(Request $request, $id)</div><div class="line">    &#123;</div><div class="line">        //</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>中间件,在控制器前使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">php artisan make:middleware myMiddleware</div><div class="line"></div><div class="line"> public function handle($request, Closure $next)</div><div class="line">    &#123;</div><div class="line">        if ($request-&gt;input(&apos;age&apos;) &lt; 200)</div><div class="line">        &#123;</div><div class="line">            return redirect(&apos;home&apos;);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return $next($request);</div><div class="line">    &#125;</div><div class="line">	// 如果在中间件的构造函数继续声明中间件，那么就可以实现多层中间件</div></pre></td></tr></table></figure>
</li>
</ol>
<p>若所有请求都会执行中间件，那么要定义在app/Http/Kernel.php 的 $middleware 属性清单列表中。</p>
<p>如果部分使用，也需要在该文件中定义一个键值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 使用在路由中</div><div class="line">Route::get(&apos;admin/profile&apos;, [&apos;middleware&apos; =&gt; &apos;auth&apos;, function()</div><div class="line">&#123;</div><div class="line">    //</div><div class="line">&#125;]);</div></pre></td></tr></table></figure></p>
<h4 id="服务，IOC容器，Provider-facades-以及composer加载机制"><a href="#服务，IOC容器，Provider-facades-以及composer加载机制" class="headerlink" title="服务，IOC容器，Provider, facades, 以及composer加载机制"></a>服务，IOC容器，Provider, facades, 以及composer加载机制</h4><ol>
<li><p>每个服务可以看做是一个类，服务组合起来变成了包，是一个大的service,一个service(或者大的service,(有一个使用它的接口类))类对应一个或者多个provider,provider写出了实例化service的方法，这时只要直接在IOC中注册provider,就可以在其他类中取出该service的实例，方法是，作为参数类型声明即可，facades提供了一个通过别名取出service类实例的方法，也需要在IOC中注册</p>
</li>
<li><p>使用服务，laravel中一个服务就是一个包，包由许多个类合成， 共同协作完成一个特定的功能，并且包中有一个对外的接口，这样外部就可以使用它，该对外接口就是一个入口文件，该包也对应一个provider和一个facade,这样其他类如控制器就可以直接使用他了。</p>
</li>
<li><p>contract的作用是低耦合，如几个类有类似的功能，可以把它做成一个接口，然后接口规定了共同的方法，在使用时就不用关注方法到底是怎样实现的。如果没有接口的定义，那么多个类似功能的类可能会出现api不一样，所以就会出现调用不同的类时需要修改api。而有了contract,只要告诉容器contrat和实现在哪，就可以轻松换装</p>
</li>
</ol>
<ul>
<li>整个使用流程其实就可以总结为两个步骤：</li>
<li><p>利用provider向容器中注册实现contract接口的对象。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">	public function register()</div><div class="line">&#123;</div><div class="line">    $this-&gt;app-&gt;bind(</div><div class="line">        &apos;Illuminate\Contracts\Auth\Registrar&apos;,</div><div class="line">        &apos;App\Services\Registrar&apos;</div><div class="line">    );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>构造函数参数类型指定为contract接口类，框架会自动找到符合条件的对象。</p>
</li>
</ul>
<p>包的入口文件会在内部实例化并使用该包内的其他类，因此对外只有一个入口类，依赖者只要实例化该类就可以获得该类的所有方法(功能), [一般包的内部会对应自己的配置文件//config.php，用来初始化等，也会有一个provider和facade，在laravel中使用时要注册]</p>
<ol>
<li>composer包加载机制<br>$class = require (‘path/to/class’);<br>$obj = new $class();<br>可以加载一个类，并且获得该类的实例，但是在实际使用中，关注的并不是该类(包)的路径，我们更希望在用到时自动加载<br>$obj = new myclass(‘name’); //即我只需要知道我给该类绑定的别名即可<br>于是composer就是为了这个而生,它在每个包的composer.json文件中设定了psr-4: {“myclass\“ : “src/“} , 这时，myclass别名就对应了composer.json目录下的src目录，当 new myclass\some() 时，就是实例化src目录下的some类，类名跟文件名一致</li>
</ol>
<p>每个包都有一个composer.json文件，和一个composer.lock文件，.lock是为了锁定版本，如果存在.lock则不加载.json,执行composer install后，composer会下载包并读取该包下psr-4，并写入全局的composer.json 文件，这样就可以了</p>
<p>使用，在运行开始处 ，require ‘vendor/autoload.php’;<br>就可以直接使用了</p>
<p><strong>php命名空间：因为php不允许两个类名一致，其实跟用加前后缀实现类名区别的效果一致</strong></p>
<ol>
<li>使用一个包，一个类的通用方法<br>es5: require(‘./‘) 先加载该类（或者包入口的路径), 再new<br>es6: import some from ‘./‘ 加载对象中的某个方法或者全部类(即function) ,再使用</li>
</ol>
<p>php : require(‘/‘)后new<br>composer : 直接利用psr-4别名加载前置路径<br>composer + namespace ,使用use关键字+ psr-4前置路径 ，省去require的麻烦</p>
<p>composer + namespace + ioc<br>use , + 类型声明注入, 省去了所有的麻烦，( 如，多层依赖 )即调即用</p>
<h4 id="laravel安装配置"><a href="#laravel安装配置" class="headerlink" title="laravel安装配置"></a>laravel安装配置</h4><ol>
<li>配置php，mysql, linux, nginx等，或者安装homestamp</li>
<li><p>安装composer,修改镜像地址</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">composer config repo.packagist composer http://packagist.phpcomposer.com</div><div class="line">// 或者仅在当前应用中 使用</div><div class="line">"repositories": &#123;</div><div class="line">    "packagist": &#123;</div><div class="line">        "<span class="built_in">type</span>": "composer",</div><div class="line">        "url": "http://packagist.phpcomposer.com"</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>执行安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer create-project laravel/laravel  project-name --prefer-dist</div></pre></td></tr></table></figure>
</li>
<li><p>更改文件权限,修改项目下public, storage权限，读写都要chmod -R 777 dir //递归设定目录权限</p>
</li>
<li>增加，修改apache虚拟主机，修改httpd-vhost.conf文件</li>
<li><p>配置好数据库.env文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line">   DocumentRoot &apos;F:/composer/public&apos;</div><div class="line"></div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost *:82&gt;</div><div class="line">    </div><div class="line">    #DocumentRoot &quot;F:/l5.1/public&quot;</div><div class="line">     DocumentRoot &quot;F:/xinfeng/public&quot;</div><div class="line">    </div><div class="line">&lt;/VirtualHost&gt;</div><div class="line">[参考为一个服务器添加多个虚拟主机的方法](http://www.cnblogs.com/hi-bazinga/archive/2012/04/23/2466605.html)</div></pre></td></tr></table></figure>
</li>
<li><p>注意在跨项目复制文件时，如果已经在编辑器打开后再复制，需要save服务器才能识别</p>
</li>
</ol>
<h4 id="laravel-Eloquent-ORM"><a href="#laravel-Eloquent-ORM" class="headerlink" title="laravel Eloquent ORM"></a>laravel Eloquent ORM</h4><ol>
<li>一对多,one post has many comments<br>数据表结构<br>table: post (id, another);<br>table: comments (id, postId, another);<br>模型定义<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">model: Post.php</div><div class="line">protect $table = &apos;posts&apos;; //设置对应的数据表名</div><div class="line">// 注意要设定可以赋值的语句</div><div class="line">protected $table = &apos;sensors&apos;;</div><div class="line">public function comments() &#123;</div><div class="line">	return $this-&gt;hasMany(&apos;App\Comment&apos;, &apos;comment_id&apos;, post_id);</div><div class="line">&#125;</div><div class="line">model : Comment.php</div><div class="line">protect $table = &apos;comments&apos;</div><div class="line"></div><div class="line">public function post() &#123;</div><div class="line">	return $this-&gt;belongsTo(&apos;App\Post&apos;[,&apos;post_id&apos;, &apos;comment_id&apos;]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM `iot_users` WHERE created_at BETWEEN &apos;2016-1-10 00:00:00&apos; AND &apos;2017-1-10 00:00:00&apos;</div><div class="line">select ip from research where day(`timestamp`) = day(now()) and `timestamp` &lt; now();</div><div class="line"></div><div class="line">select ip from research where `timestamp` &gt;= date_sub(now(),interval 10 day) and `timestamp` &lt; date_sub(now(),interval 10 day);</div><div class="line"></div><div class="line">User::whereBetween(&apos;created_at&apos;, [Input::get(&apos;startTime&apos;), Input::get(&apos;endTime&apos;)])-&gt;get();</div><div class="line">// timestamp作为字符串传来</div><div class="line"> &quot;startTime&quot; =&gt; &quot;2015-07-08 00:00:00&quot;</div><div class="line">  &quot;endTime&quot; =&gt; &quot;2015-07-29 11:32:48&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$data = [&apos;userId&apos; =&gt; $user-&gt;id, &apos;sensors&apos; =&gt; $sensors]; var_dump(json_encode($data));</div><div class="line"></div><div class="line"></div><div class="line">  $.ajaxSetup(&#123;</div><div class="line">    headers: &#123;</div><div class="line">        &apos;X-CSRF-TOKEN&apos;: $(&apos;meta[name=&quot;csrf-token&quot;]&apos;).attr(&apos;content&apos;)</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// json字符串转json对象,(js对象和json对象可以混用)</div><div class="line">var json = &quot;&#123;&#125;&quot;;</div><div class="line">//转对象</div><div class="line">obj = eval(json);</div><div class="line">eval(&quot;(&quot;+json+&quot;)&quot;);</div><div class="line">//或者用</div><div class="line">JSON.parse(string);</div><div class="line"></div><div class="line">// 将对象转为json字符串</div><div class="line">var string = JSON.stringify(json)</div><div class="line"></div><div class="line">js打印变量，最好办法是将对象转化为字符串，然后就可以看到全部内容</div><div class="line"></div><div class="line">&lt;!-- 字符串转对象(strJSON代表json字符串) --&gt;</div><div class="line">  &lt;!-- var obj = eval(strJSON); --&gt;</div><div class="line">  &lt;!-- var obj = str.JSON.parseJSON(); --&gt;</div><div class="line">  &lt;!-- var obj = JSON.parse(strJSON)； --&gt;</div><div class="line">&lt;!-- json对象转字符串(obj代表json对象) --&gt;</div><div class="line">  &lt;!-- var str = obj.toJSONString(); --&gt;</div><div class="line">  &lt;!-- var str = JSON.stringify(obj) --&gt;</div><div class="line">&lt;!-- 运用时候需要除了eval()以外需要json.js包（切记哦） --&gt;</div><div class="line"></div><div class="line">jQuery.ajax(&#123; </div><div class="line">url: full_url, </div><div class="line">dataType: &quot;json&quot;, </div><div class="line">success: function(results) &#123; </div><div class="line">alert(result.name); </div><div class="line">&#125; &#125;); </div><div class="line"></div><div class="line"></div><div class="line">// 历遍map</div><div class="line">var map = &#123;  </div><div class="line">             &quot;name&quot; : &quot;华仔&quot;,  </div><div class="line">         &quot;realname&quot;:&quot;刘德华&quot;  </div><div class="line">        &#125;;  </div><div class="line">  </div><div class="line">for (var key in map) &#123;  </div><div class="line">            console.log(&quot;map[&quot;+key+&quot;]&quot;+map[key]);  </div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>Js 键值对实现</p>
<p>function Map() {<br>this.keys = new Array();<br>this.data = new Array();<br>//添加键值对<br>this.set = function (key, value) {<br>if (this.data[key] == null) {//如键不存在则身【键】数组添加键名<br>this.keys.push(value);<br>}<br>this.data[key] = value;//给键赋值<br>};<br>//获取键对应的值<br>this.get = function (key) {<br>return this.data[key];<br>};<br>//去除键值，(去除键数据中的键名及对应的值)<br>this.remove = function (key) {<br>this.keys.remove(key);<br>this.data[key] = null;<br>};<br>//判断键值元素是否为空<br>this.isEmpty = function () {<br>return this.keys.length == 0;<br>};<br>//获取键值元素大小<br>this.size = function () {<br>return this.keys.length;<br>};<br>}</p>
<p>###js 动态添加属性<br>function objMerger(obj1, obj2)<br>{<br>for(var r in obj2){<br>eval(“obj1.”+r+”=obj2.”+r);<br>}<br>return obj1;<br>}<br>obj = objMerger(obj, shuxing);</p>
<p>obj = {} ;<br>var t = ‘jj’;<br>obj[t] = ‘kk’; // 如果直接obj.t则会得到键是t<br>obj = { ‘jj’: ‘kk’ };</p>
<h3 id="字符串分割"><a href="#字符串分割" class="headerlink" title="字符串分割"></a>字符串分割</h3><p>var array = “200，400，300”.split(“,”);<br>var nums = [ ];<br>for (var i=0 ; i&lt; array.length ; i++)<br>{<br>nums.push(parseInt(array[i]));<br>}</p>
<h3 id="jquery内部头部加入"><a href="#jquery内部头部加入" class="headerlink" title="jquery内部头部加入"></a>jquery内部头部加入</h3><p>$(“#a”).prepend(“#b”);或者$(“#b”).prependTo(“#a”);<br>了jQuery使用before()和after()在元素前后添加内容的方法。</p>
<h4 id="laravel-session便捷方法"><a href="#laravel-session便捷方法" class="headerlink" title="laravel session便捷方法"></a>laravel session便捷方法</h4><p>session([‘key’ =&gt; ‘val’]);</p>
<h3 id="php检查变量"><a href="#php检查变量" class="headerlink" title="php检查变量"></a>php检查变量</h3><p> isset— 检测变量是否设置, empty — 检查一个变量是否为空(是否存在也检测了,不存在或为空返回true)<br> laravel 中<br> @if( $f !== null )<br> @endif</p>
<p>return redirect()-&gt;back()-&gt;withInput();<br>return redirect(‘user/login’)-&gt;with(‘message’, ‘Login Failed’);</p>
<h3 id="数据存于session中，并在模板中用表达式输出"><a href="#数据存于session中，并在模板中用表达式输出" class="headerlink" title="*数据存于session中，并在模板中用表达式输出"></a><em>*</em>数据存于session中，并在模板中用表达式输出</h3><p>重置session<br>Session::forget(‘sensors’);<br>$sensors = User::find(session(‘userId’))-&gt;sensors;</p>
<h4 id="js判断对象值是否属性为空或者变量是否存在等（js对声明但未初始化的变量都认为是undefined"><a href="#js判断对象值是否属性为空或者变量是否存在等（js对声明但未初始化的变量都认为是undefined" class="headerlink" title="js判断对象值是否属性为空或者变量是否存在等（js对声明但未初始化的变量都认为是undefined"></a>js判断对象值是否属性为空或者变量是否存在等（js对声明但未初始化的变量都认为是undefined</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">1、if   (typeOf(x)   ==   &quot;undefined&quot;)</div><div class="line"></div><div class="line">2、if   (typeOf(x)   !=   &quot;object&quot;)</div><div class="line"></div><div class="line">3、if(!x)</div><div class="line"></div><div class="line">var t = &#123;&#125;;</div><div class="line">t == null ; //false</div><div class="line"></div><div class="line">var p = &#123;&#125;;</div><div class="line">typeof p // undefined</div><div class="line">// null 和 &#123;&#125; 区别</div><div class="line">p.name = &apos;t&apos;; //sucess</div><div class="line">p.name = &apos;p&apos; ; //error</div><div class="line"></div><div class="line">function isOwnEmpty(obj)</div><div class="line">&#123;</div><div class="line">    for(var name in obj)</div><div class="line">    &#123;</div><div class="line">	// 如果不检测原型继承来的属性，则去掉这行</div><div class="line">        if(obj.hasOwnProperty(name))</div><div class="line">        &#123;</div><div class="line">            return false;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return true;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="node-js-服务端向另一个服务器发送restful请求"><a href="#node-js-服务端向另一个服务器发送restful请求" class="headerlink" title="node js 服务端向另一个服务器发送restful请求"></a>node js 服务端向另一个服务器发送restful请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">var https = require(&apos;https&apos;);</div><div class="line">// 如果是http就require(&apos;http&apos;);</div><div class="line">var optionsget = &#123;</div><div class="line">    host : &apos;graph.facebook.com&apos;, // here only the domain name</div><div class="line">    // (no http/https !)</div><div class="line">    port : 443,</div><div class="line">    path : &apos;/youscada&apos;, // the rest of the url with parameters if needed</div><div class="line">    method : &apos;GET&apos; // do GET//or &apos;POST&apos;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">console.info(&apos;Options prepared:&apos;);</div><div class="line">console.info(optionsget);</div><div class="line">console.info(&apos;Do the GET call&apos;);</div><div class="line"> </div><div class="line">// do the GET request</div><div class="line">var reqGet = https.request(optionsget, function(res) &#123;</div><div class="line">    console.log(&quot;statusCode: &quot;, res.statusCode);</div><div class="line">    // uncomment it for header details</div><div class="line">//  console.log(&quot;headers: &quot;, res.headers);</div><div class="line">    res.on(&apos;data&apos;, function(d) &#123;</div><div class="line">        console.info(&apos;GET result:\n&apos;);</div><div class="line">        process.stdout.write(d);</div><div class="line">        console.info(&apos;\n\nCall completed&apos;);</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;);</div><div class="line">reqGet.end();</div><div class="line">reqGet.on(&apos;error&apos;, function(e) &#123;</div><div class="line">    console.error(e);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>//php 时间格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php  </div><div class="line">echo &quot;时间格式1：&quot;.date(&quot;Y-m-d H:i:s &quot;).&quot;&lt;br&gt;&quot;;// 2010-06-12 10:26:31   </div><div class="line">echo &quot;时间格式2：&quot;.date(&quot;y-M-D h:i:S &quot;).&quot;&lt;br&gt;&quot;;// 10-Jun-Sat 10:43:th   </div><div class="line">echo &quot;月份，英文全名：&quot;.date(&quot;F&quot;).&quot;&lt;br&gt;&quot;;// June   </div><div class="line">echo &quot;月份，二位数字，补零：&quot;.date(&quot;m&quot;).&quot;&lt;br&gt;&quot;;//  06  </div><div class="line">echo &quot;月份，二位数字，不补零：&quot;.date(&quot;n&quot;).&quot;&lt;br&gt;&quot;;//  6  </div><div class="line">echo &quot;月份，三个英文：&quot;.date(&quot;M&quot;).&quot;&lt;br&gt;&quot;;// Jun  </div><div class="line">echo &quot;星期几，英文全名：&quot;.date(&quot;l&quot;).&quot;&lt;br&gt;&quot;;// Saturday  </div><div class="line">echo &quot;星期几，三个英文：&quot;.date(&quot;D&quot;).&quot;&lt;br&gt;&quot;;// Sat  </div><div class="line">echo &quot;星期几，数字型：&quot;.date(&quot;w&quot;).&quot;&lt;br&gt;&quot;;// 6  </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="事件委派"><a href="#事件委派" class="headerlink" title="事件委派"></a>事件委派</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	$(&quot;#sensor-info&quot;).on(&quot;click&quot;, &quot;button.edit&quot;, function(event) &#123;</div><div class="line">		var targetId = $(event.target).parent(&quot;.edit&quot;).data(&apos;id&apos;);//.css(&quot;background-color&quot;, &quot;red&quot;);</div><div class="line">		console.log(targetId);</div><div class="line">		//$(&quot;#my-prompt&quot;).modal();</div><div class="line">		var modal = $(&quot;#prompt-&quot;+targetId);</div><div class="line">		console.log(modal);</div><div class="line">		modal.modal();</div><div class="line">	&#125;);</div><div class="line"></div><div class="line"></div><div class="line">@section(&apos;js&apos;)</div><div class="line">&lt;script&gt;</div><div class="line"></div><div class="line">	$(&apos;document&apos;).ready(function() &#123;</div><div class="line">		$(&quot;button.edit&quot;).click(function() &#123;</div><div class="line">			var id = $(this).data(&apos;id&apos;);</div><div class="line"></div><div class="line">			var target = $(&quot;#prompt&quot;+id);</div><div class="line">			console.log(target);</div><div class="line">			var editForm = target.find(&quot;.am-form&quot;);</div><div class="line">			console.log(editForm.serialize());</div><div class="line">			//console.log(id);</div><div class="line">			var modal = target.modal(&#123;closeOnConfirm: 0, onConfirm: submitEdit&#125;);</div><div class="line">			function submitEdit() &#123;</div><div class="line">				console.log(&apos;jj&apos;);</div><div class="line">				var val = target.find(&quot;.submit&quot;).removeClass(&quot;am-modal-btn submit&quot;).html(&apos;提交中...&apos;);</div><div class="line">				//console.log(val);</div><div class="line"></div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">	&#125;);</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">@endsection</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">				&lt;div class=&quot;am-cf&quot;&gt;</div><div class="line">                  &lt;div class=&quot;am-fr&quot;&gt;</div><div class="line">					  &lt;button type=&quot;button&quot; data-id=&quot;&#123;&#123; $sensor-&gt;id &#125;&#125;&quot; class=&quot;edit am-btn am-btn-default am-btn-xs&quot;&gt;&lt;span class=&quot;am-icon-pencil&quot;&gt;&lt;/span&gt;&lt;/button&gt;</div><div class="line">                    &lt;button type=&quot;button&quot; class=&quot;am-btn am-btn-default am-btn-xs delete&quot;&gt;删除&lt;/button&gt;</div><div class="line"></div><div class="line">                  &lt;/div&gt;</div><div class="line">                &lt;/div&gt;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/laravel/" data-id="cizut7q3e000st4ddk5zz44ea" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js.http" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/js.http/" class="article-date">
  <time datetime="2017-03-03T11:20:16.285Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/03/js.http/">学习javascript的基本知识，以及面向对象，每学一个知识点，都要认真记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="js的起源"><a href="#js的起源" class="headerlink" title="js的起源"></a>js的起源</h3><p>js在1995年，由netscape公司的 Brendan Eich创建，因为Netscape与Sun合作，当时想借用Sun的java 之名，来推广js,故取名javascript;后来，微软为了进军浏览器，模仿js开发了JScript(因为不能重名),接着CEnvi 又推出了ScriptEase,这时，是三足鼎立的状态</p>
<p>为了统一规格，出现了javaScript兼容于ECMA标准，ECMA只负责定义标准，不负责具体实现，这时js又被称为ECMAScript,到现在ECMA6,是力推，ECMA7是未来,js正在逐渐成长为一门完善了全能型语言</p>
<h3 id="js的组成部分"><a href="#js的组成部分" class="headerlink" title="js的组成部分"></a>js的组成部分</h3><ol>
<li>ECMASctipt ,描述了该语言的语法和基本对象,类似其他语言，nodejs主要部分在这里</li>
<li>文档对象类型DOM,用于描述网页语言的操纵方法和接口</li>
<li>BOM ,浏览器对象模型，描述了用于和浏览器交互的方法和接口</li>
</ol>
<h3 id="js的一般用途"><a href="#js的一般用途" class="headerlink" title="js的一般用途"></a>js的一般用途</h3><ol>
<li>嵌入动态html页面</li>
<li>响应监听浏览器事件</li>
<li>读写html元素</li>
<li>验证表单数据</li>
<li>控制cookie等</li>
<li>nodejs端服务器开发</li>
</ol>
<h3 id="js的安全性较差，就是当一条语句执行不了，就会导致下面的语句都无法执行，因此可以用try-catch-捕捉异常，抛出异常，才能让下面的语句也可以执行，出错时不至于全部完结"><a href="#js的安全性较差，就是当一条语句执行不了，就会导致下面的语句都无法执行，因此可以用try-catch-捕捉异常，抛出异常，才能让下面的语句也可以执行，出错时不至于全部完结" class="headerlink" title="js的安全性较差，就是当一条语句执行不了，就会导致下面的语句都无法执行，因此可以用try catch, 捕捉异常，抛出异常，才能让下面的语句也可以执行，出错时不至于全部完结"></a>js的安全性较差，就是当一条语句执行不了，就会导致下面的语句都无法执行，因此可以用try catch, 捕捉异常，抛出异常，才能让下面的语句也可以执行，出错时不至于全部完结</h3><h3 id="js为直译语言，因为主流浏览器解释引擎都是每次运行时逐行加载代码并解释，V8是将代码解译后运行的"><a href="#js为直译语言，因为主流浏览器解释引擎都是每次运行时逐行加载代码并解释，V8是将代码解译后运行的" class="headerlink" title="js为直译语言，因为主流浏览器解释引擎都是每次运行时逐行加载代码并解释，V8是将代码解译后运行的;"></a>js为直译语言，因为主流浏览器解释引擎都是每次运行时逐行加载代码并解释，V8是将代码解译后运行的;</h3><h3 id="DHTML-动态html-是结合了html-css-js-技术，动态创建交互，和动态ajax更新浏览器内容技术，不需要重新加载页面"><a href="#DHTML-动态html-是结合了html-css-js-技术，动态创建交互，和动态ajax更新浏览器内容技术，不需要重新加载页面" class="headerlink" title="DHTML,动态html ,是结合了html ,css, js 技术，动态创建交互，和动态ajax更新浏览器内容技术，不需要重新加载页面"></a>DHTML,动态html ,是结合了html ,css, js 技术，动态创建交互，和动态ajax更新浏览器内容技术，不需要重新加载页面</h3><h3 id="补充，字符集，字符编码，以及html头的accept"><a href="#补充，字符集，字符编码，以及html头的accept" class="headerlink" title="补充，字符集，字符编码，以及html头的accept"></a>补充，字符集，字符编码，以及html头的accept</h3><ol>
<li>字符集，各国语言，字符的集合，比如所有的ASCII,Unicode,都是字符集，是人类可以识别的字符集合</li>
<li>字符编码，将字符集转换为计算机可以识别的的字节的规则， 如UTF-8 将前8位用在ASCII,后面的扩展到2到四个字节，可以分别一一对应Unicode的所有字符</li>
<li>客户端与服务端交换信息，首先需要request告诉服务器它接受的编码，和它请求传送数据的编码，然后服务器利用相应的编码规则解码请求信息，然后按照自己的默认规则运行程序，最后根据客户端可以接受的编码类型来返回数据，这时客户端根据返回的数据编码类型，解码即可</li>
<li>当两个不同软件，当客户端与服务端交换信息，时，必须每次信息流都要告诉对方我用的是什么字符集，（或者说用的是什么编码，用的是json还是 HTML等），并且告诉对方我希望接受的编码和字符集是什么，当然这可以智能识别，但动态识别其实还是告诉了对方这些信息，只是较为底层</li>
</ol>
<h3 id="理解http协议为无状态"><a href="#理解http协议为无状态" class="headerlink" title="理解http协议为无状态"></a>理解http协议为无状态</h3><ol>
<li>http为无状态是指，服务端对于客户端的事务处理不具备记忆功能，也就是服务器并不知道是否是同一个浏览器客户端发出的请求</li>
<li>人为什么能记住对方，为什么能记住知识，是因为记忆，同样，在计算机世界，记忆靠内存来实现，靠总线来连接到cpu，cpu只负责计算，内存则通过保留记忆而模仿了人类的记忆</li>
<li>cookie, 保存在浏览器端的信息，流程是，客户端填了表单（或者通过浏览器自带的保存数据表单），传到服务器认证后，服务器返回cookie, 浏览器端负责保存，二次请求时，客户端附带cookie,服务器检查，如果有cookie,则不继续执行数据库操作。这里需要真正验证cookie内容，预防客户端改了</li>
<li>sesion., 保存在服务器内存的认证信息，当首次认证成功后，服务器设定sesion并返回session给客户端，二次请求时，客户端需要附带该session,当服务端检查该session为正确时，可以识别用户信息，了。</li>
<li>不管是何种交换信息，何种认证都是建立在内存和储存（数据库—）之上的。</li>
<li>其实网络的事务，或者说软件的事务，与人的思维是统一的，不然怎么叫人开发软件呢，计算机，即使内存，算法，计算的艺术。</li>
</ol>
<h3 id="多并发，或者说请求的生命周期，任何连接，都是通过识别是否认证，识别哪个用户，然后识别请求URL（请求内容），执行事务，（如果是耗时事务则，抛出事务，）继续处理后续请求。"><a href="#多并发，或者说请求的生命周期，任何连接，都是通过识别是否认证，识别哪个用户，然后识别请求URL（请求内容），执行事务，（如果是耗时事务则，抛出事务，）继续处理后续请求。" class="headerlink" title="多并发，或者说请求的生命周期，任何连接，都是通过识别是否认证，识别哪个用户，然后识别请求URL（请求内容），执行事务，（如果是耗时事务则，抛出事务，）继续处理后续请求。"></a>多并发，或者说请求的生命周期，任何连接，都是通过识别是否认证，识别哪个用户，然后识别请求URL（请求内容），执行事务，（如果是耗时事务则，抛出事务，）继续处理后续请求。</h3><p>最后返回。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/js.http/" data-id="cizut7q3n000xt4ddewz48wti" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/jd/" class="article-date">
  <time datetime="2017-03-03T11:20:16.284Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="电子商务站基础问题"><a href="#电子商务站基础问题" class="headerlink" title="电子商务站基础问题"></a>电子商务站基础问题</h5><hr>
<ol>
<li>防京东分类菜单</li>
<li>文章频道无限分类</li>
<li>登录注册</li>
<li>长文章分页</li>
<li>商品查看放大镜</li>
<li>群发邮件</li>
<li>商品搜索</li>
<li>手机短信验证</li>
<li>支付宝支付</li>
<li>购物车</li>
<li>订单</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/jd/" data-id="cizut7q3d000rt4dd9q9eqo5j" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javascript.grammer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/javascript.grammer/" class="article-date">
  <time datetime="2017-03-03T11:20:16.284Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/03/javascript.grammer/">javascript 的语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="基础概念性理解堆和栈"><a href="#基础概念性理解堆和栈" class="headerlink" title="基础概念性理解堆和栈"></a>基础概念性理解堆和栈</h3><p><a href="http://blog.csdn.net/hairetz/article/details/7207230" target="_blank" rel="external">参考</a></p>
<ol>
<li>堆和栈都是内存，内存本来是统一的，也就没有差别，但是程序的执行，内存的申请，内存的赋值。则是由特定机制处理的，这个机制会把内存分为连续的，不连续的块，cpu要获得某一个内存的值，内容，需要知道它的地址</li>
<li>栈是一块连续的空间，由特定的机制创建，管理和清理，程序员只管写赋值代码等</li>
<li>堆却是非连续的，也就是堆与堆直接，物理上可以不再同一块内存，因为有链表结构的存在，堆储存的信息比栈要多，而且每次申请一个堆，都需要 用new 的方法,在堆没有用处之后，需要程序员手动清理，以防内存泄露。当然js 的垃圾回收机制可以做一些常用的回收内存，但是如果程序设计不当，那么就会造成大量的内存消耗。从而导致程序性能非常低<h3 id="js的闭包，作用链，垃圾回收，解释"><a href="#js的闭包，作用链，垃圾回收，解释" class="headerlink" title="js的闭包，作用链，垃圾回收，解释"></a>js的闭包，作用链，垃圾回收，解释</h3></li>
</ol>
<p>初级解释。</p>
<ol>
<li>闭包是内部函数对外部函数的变量引用。</li>
<li>GC机制。如果一个对象不再被引用，那么这个对象就会被GC回收。如果两个对象互相引用，而不再被第三者引用，则这两个都会被回收。函数执行时，会动态申请变量，对象，函数执行完毕后，GC根据规则回收变量，对象所占用的内存</li>
</ol>
<p>较为成熟解释</p>
<ol>
<li>作用域，代表着函数或者变量被访问的范围</li>
<li>作用域链，在js中函数也是对象，是对象就会拥有属性，如属性[[scope]],就保存着它能访问的作用域中的所有变量和对象，在函数创建时，scope中只保存着全局变量，对象；当函数执行时，会有运行时作用域对象加入到scope中，并把它推到scope的栈顶端，然后执行该函数里面的语句时，就会从顶端一直往上查找到全局作用域，知道找到该变量为止，这里要注意，每一个函数都有一个独立的scope,这个scope包含了该函数的作用域链，也就是所有能访问的作用域对象的集合，当该函数执行完毕时，它的scope才会被清除，和垃圾回收<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">function add(num1,num2) &#123;</div><div class="line">    var sum = num1 + num2;</div><div class="line">    return sum;</div><div class="line">&#125;</div><div class="line">// add在创建时，scope中只有全局作用域对象，在add执行时，会进入（生成一个)活动作用域对象，函数执行的语句根据优先级来向scope中查询变量，引用等</div><div class="line"></div><div class="line">function sayName(name)&#123;</div><div class="line">    return function()&#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">var say = sayName(&apos;jozo&apos;);</div><div class="line"></div><div class="line">// sayName定义时，sayName只拥有全局作用域对象，</div><div class="line">// say执行后，sayName得到执行，sayName将会有一个新的运行时局部作用域(优先级高),say语句之后，(此时sayName执行完毕，属于它的作用域链已经被销毁，但是由于存在var say的引用，所以它的运行时作用域没有被销毁,或者说是传给了匿名函数)返回一个匿名函数，也就是得到一个新的函数，该匿名函数的 scope中包含了全局作用域和sayName的运行时作用域，当执行say()时，匿名函数的scope中又加入了新的自己的运行时作用域，但是由于,存在全局变量say的引用，所以该scope一直保留着</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> oli = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</div><div class="line">     <span class="keyword">var</span> i;</div><div class="line">     <span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; <span class="number">5</span>;i++)&#123;</div><div class="line">         oli[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">             <span class="keyword">var</span> a = num; <span class="comment">// 为了说明问题</span></div><div class="line">             <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                 alert(a);</div><div class="line">             &#125;</div><div class="line">         &#125;)(i)</div><div class="line">     &#125;</div><div class="line">     <span class="built_in">console</span>.log(i); <span class="comment">// 5</span></div></pre></td></tr></table></figure>
<p><a href="http://segmentfault.com/a/1190000002778015" target="_blank" rel="external">参考</a><br><a href="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" target="_blank" rel="external">以及更深的解释</a></p>
<h3 id="需要理解一下指针和引用"><a href="#需要理解一下指针和引用" class="headerlink" title="需要理解一下指针和引用"></a>需要理解一下指针和引用</h3><p>首先声明并初始化一个变量，那么它会得到一块内存，存放着它的地址和值，然后声明一个指向它的指针，那么指针得到的是自己的内存块，里面存放着它自己的地址，它的值是前面那个内存的地址，指针与引用的最主要区别是，利用指针传值时，是对指针的一个复制，而引用传值时，代表的是它本身<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">void test(int *p) //这里传值，*p实际上是一个copy,,有自己的内存，所以对它的改变不会对原来的指针有影响,当然如果是两级指针，那么得到的将是它指向的变量，跟引用一样可以改变了</div><div class="line">&#123;</div><div class="line">　　int a=1;</div><div class="line">　　p=&amp;a;</div><div class="line">　　cout&lt;&lt;p&lt;&lt;&quot; &quot;&lt;&lt;*p&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void)</div><div class="line">&#123;</div><div class="line">    int *p=NULL;</div><div class="line">    test(p);</div><div class="line">    if(p==NULL)</div><div class="line">    cout&lt;&lt;&quot;指针p为NULL&quot;&lt;&lt;endl;</div><div class="line">    system(&quot;pause&quot;);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="js-的类型"><a href="#js-的类型" class="headerlink" title="js 的类型"></a>js 的类型</h3><p>js是一门弱语言，它只有两种类型，一是初始类型，而是引用类型，初始类型存值是直接在栈中进行，引用类型是将一个值或者对象的地址存在当前变量，也可以直接改变它的值，而不像指针那样麻烦</p>
<p>在定义变量时，初始类型有undefined, boolean, number, string, 值直接存在栈中，固定空间，string是存放的它的地址，string是唯一一个可变长度的原始类型</p>
<p>js中一切都是对象，引用类型的都是对象，只是它存放的值是这个对象的地址，母目的是节省内存和适应对象的长度可变性（链表来连接各个小内存块，达到当新增对象里面的属性和方法时，它可以增长长度），这种内存结构叫做堆，而栈是固定的空间，所以只适合存在地址，和一些简单的原始类型</p>
<p>上面说到的string , number 实际上，在js中也是对象，（可以理解有两套，存放时是原始类型，（这是它内存中结构，但是在宏观上看，它就是一个对象，每一个实例都有它的方法和属性）</p>
<p>js中的引用类型（对象）实际上与其他语言的类是逻辑相通的，也就是基本可以看做同一样的东西，既然是对象，就会有属性和方法，js中有一个object对象，所有的对象或者说js里面所有的东西都是继承它得到的，object对象有两个重要属性，一个是constructor,还有就是prototype </p>
<p>js中的对象可分为两种，一种内置的如object,Funciton,一种实例化出来的，对象的实例和对象都是占据着内存的对空间，只是prototype,和constuctor属性是根据继承关系有所指向的，指向就是指针，指针和引用的区别可以简单理解为，指针不可以直接按常规改变它所指向的对象的值， 但引用可以</p>
<p>理解js的原型链是关键，一定要建立在内存（栈，堆）级别的理解，[栈的执行速度比堆块，因为它是固定的空间，所以不能把堆中的数据放在栈中以免影响速度,而是把堆的地址存放在栈中做一个引用，这样就可以达到以空间换时间的效果，折中],constructor a是b的一个实例，那么a.constuctor指向b ,,, prototype: a.prototype指向a本身<br><a href="http://www.blogjava.net/heavensay/archive/2013/10/20/405440.html" target="_blank" rel="external">具体参考,原型链图</a></p>
<h3 id="js中的面向对象"><a href="#js中的面向对象" class="headerlink" title="js中的面向对象"></a>js中的面向对象</h3><p>对象和类，可以先把它当做一个概念，实例就是利用对象（对象构造器）或者类，来生成的有自己独立堆空间的一个新的对象，如实例化两个对象，那么就拥有三个堆空间，一个是原来的类（或者说是对象）； 另外两个是新的对象（实例）；这里每个对象由于其继承关系，都有一个内存的指向关系，原型链</p>
<p>正式因为有prototype, 和constructor这两个对象可以指向它创造函数（对象）的引用，才可以使作用域链的形成，作用域链会在当前没有的时候，搜寻它的prototype,等，所以就可以用到了’外部’的变量对象，虽然是引用，但是引用节省了空间，优化了代码的公用</p>
<p>面向对象的基本要求</p>
<ol>
<li>封装</li>
<li>聚集，一个对象储存另一个对象的能力</li>
<li>继承</li>
<li>多态，</li>
</ol>
<p>js中this指针，总是指向调用该方法的对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var oCar = new Object;</div><div class="line">oCar.color = &quot;red&quot;;</div><div class="line">oCar.showColor = function() &#123;</div><div class="line">  alert(this.color); // this指向function对象</div><div class="line">&#125;;</div><div class="line"></div><div class="line">oCar.showColor();		//输出 &quot;red&quot;</div></pre></td></tr></table></figure></p>
<h3 id="任何软件，设计程序都是需要懂得内存，所以理解了内存，就等于理解了一切"><a href="#任何软件，设计程序都是需要懂得内存，所以理解了内存，就等于理解了一切" class="headerlink" title="任何软件，设计程序都是需要懂得内存，所以理解了内存，就等于理解了一切"></a>任何软件，设计程序都是需要懂得内存，所以理解了内存，就等于理解了一切</h3><h3 id="js中的错误机制"><a href="#js中的错误机制" class="headerlink" title="js中的错误机制"></a>js中的错误机制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function throwit() &#123;</div><div class="line">  throw new Error(&apos;&apos;); // throw是一个中断程序，抛出一个值，一个对象</div><div class="line">&#125;</div><div class="line"></div><div class="line">function catchit() &#123;</div><div class="line">  try &#123;</div><div class="line">    throwit();</div><div class="line">  &#125; catch(e) &#123;</div><div class="line">    console.log(e.stack); // print stack trace</div><div class="line">  &#125; //try catch可以捕捉到trow抛出的对象或者值</div><div class="line">&#125;</div><div class="line"></div><div class="line">catchit()</div></pre></td></tr></table></figure>
<h3 id="下面是一些ES6的新特性"><a href="#下面是一些ES6的新特性" class="headerlink" title="下面是一些ES6的新特性"></a>下面是一些ES6的新特性</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/javascript.grammer/" data-id="cizut7q3a000pt4ddijzh5dqw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-interview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/interview/" class="article-date">
  <time datetime="2017-03-03T11:20:16.283Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="by-lumin-19-02-2016"><a href="#by-lumin-19-02-2016" class="headerlink" title="by lumin  19.02.2016"></a>by lumin  19.02.2016</h4><p>永远要记得查看这里日记</p>
<hr>
<h3 id="web前端面试题"><a href="#web前端面试题" class="headerlink" title="web前端面试题"></a>web前端面试题</h3><hr>
<h4 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h4><p>中文可以解释为可扩展超文本传输请求。Xml可扩展标记语言，Http超文本传输协议，Request请求。XMLHttpRequest对象可以在不向服务器提交整个页面的情况下，实现局部更新网页。当页面全部加载完毕后，客户端通过该对象向服务器请求数据，服务器端接受数据并处理后，向客户端反馈数据。 XMLHttpRequest 对象提供了对 HTTP 协议的完全的访问，包括做出 POST 和 HEAD 请求以及普通的 GET 请求的能力。</p>
<p>有1. open, 2. send, 3. recieve, 4. abort方法</p>
<h4 id="进程与线程区别"><a href="#进程与线程区别" class="headerlink" title="进程与线程区别"></a>进程与线程区别</h4><p>进程在执行时拥有独立内存，线程是共享内存，线程运行在进程中，</p>
<h4 id="语义化HTML"><a href="#语义化HTML" class="headerlink" title="语义化HTML"></a>语义化HTML</h4><p>如 h1-h6, p, 列表用ul，li，可以在没有样式的情况下仍然保持清晰的结构，也有利于屏幕阅读器，爬虫的抓取，</p>
<h4 id="网络爬虫"><a href="#网络爬虫" class="headerlink" title="网络爬虫"></a>网络爬虫</h4><p>又称网络机器人，根据一个或者一组URL作为目标，有选择的访问web页面和相关链接，,过滤掉与主题无关的策略，获取所需信息，并建立索引，<br>三个主要问题</p>
<ol>
<li>抓取目标的描述和定义</li>
<li>对网页数据的分析和过滤</li>
<li>对URL的搜索策略</li>
</ol>
<h4 id="seo-search-engine-optimize"><a href="#seo-search-engine-optimize" class="headerlink" title="seo(search engine optimize)"></a>seo(search engine optimize)</h4><p>分为文章seo和图片seo,内部优化有：META标签，如title,keywords,description,<br>链接优化，如alt属性 ，外链，友链互换等。</p>
<p>网站pr(pagerank)值是谷歌评价网站好坏的标准，从1-10;</p>
<h4 id="网站资源访问优化"><a href="#网站资源访问优化" class="headerlink" title="网站资源访问优化"></a>网站资源访问优化</h4><ol>
<li>压缩，合并</li>
<li>cdn托管</li>
<li>静态资源缓存，启动浏览器的缓存cache-control /，构建一个比较完整的静态资源缓存方案</li>
</ol>
<h4 id="减少页面加载的方法"><a href="#减少页面加载的方法" class="headerlink" title="减少页面加载的方法"></a>减少页面加载的方法</h4><ol>
<li>图片优化，压缩</li>
<li>压缩css，较少http请求<h4 id="doctype文档类型"><a href="#doctype文档类型" class="headerlink" title="doctype文档类型"></a>doctype文档类型</h4>包括html,xhtml,有三种DTD 类型，strict,tranditional,frameset<h4 id="原型继承proto-prototype-js会向上查找原型链-知道找到该属性为止"><a href="#原型继承proto-prototype-js会向上查找原型链-知道找到该属性为止" class="headerlink" title="原型继承proto, prototype,js会向上查找原型链,知道找到该属性为止"></a>原型继承<em>proto</em>, prototype,js会向上查找原型链,知道找到该属性为止</h4></li>
<li>js面向对象，</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//父</div><div class="line">function P1 () &#123;</div><div class="line">this.name = &apos;&apos;;</div><div class="line">&#125;</div><div class="line">P1.prototype = function() &#123;</div><div class="line">doSomething;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function P2() &#123;</div><div class="line">this.id = &apos;&apos;;</div><div class="line">&#125;</div><div class="line">// P2的原型指向一个p1实例</div><div class="line">P2.prototype = new P1();</div><div class="line"></div><div class="line">// 或者有</div><div class="line">function P2() &#123;</div><div class="line">P1.call(this, name);</div><div class="line">this.name = &apos;&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>一个对象的constructor始终指向创建当前对象的构造函数<br>每一个函数都有一个prototype属性，这个属性也是一个对象，这个对象的constructor,就默认指向这个函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function p1() &#123;</div><div class="line">this.name = &apos;&apos;;</div><div class="line">&#125;</div><div class="line">function p2 () &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 继承p1</div><div class="line">p2.prototype = new p1();</div><div class="line">此时prototype指向了一个新的对象，它的 constructor变化了，需要重新指向p2()</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="圣杯布局"><a href="#圣杯布局" class="headerlink" title="圣杯布局"></a>圣杯布局</h4><p>利用负边距，使浮动元素后面的元素可以移上来</p>
<h4 id="浏览器加载页面"><a href="#浏览器加载页面" class="headerlink" title="浏览器加载页面"></a>浏览器加载页面</h4><p>从上到下，渲染也是，渲染和下载是同时的，挤压拉伸，满进慢出，弧形运动</p>
<h4 id="http状态码"><a href="#http状态码" class="headerlink" title="http状态码"></a>http状态码</h4><p>304缓存，500服务错误，200ok，404 notfound,请求失败</p>
<h4 id="js数据类型"><a href="#js数据类型" class="headerlink" title="js数据类型"></a>js数据类型</h4><p>undefined, null ,boolean,number,string</p>
<h4 id="css样式置顶，有利于提高加载速度，"><a href="#css样式置顶，有利于提高加载速度，" class="headerlink" title="css样式置顶，有利于提高加载速度，"></a>css样式置顶，有利于提高加载速度，</h4><h4 id="js跨域"><a href="#js跨域" class="headerlink" title="js跨域"></a>js跨域</h4><p>网络安全不可以访问不同域的内容（协议，端口，域名），但是js脚本却可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">src=&apos;?callback=dosomthing&apos;</div><div class="line">function dosomthing(data) &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">php</div><div class="line">$data = &apos;kdfj&apos;;</div><div class="line">echo $_GET[&apos;callback&apos;].(该函数加数据)</div></pre></td></tr></table></figure></p>
<h4 id="时间委托"><a href="#时间委托" class="headerlink" title="时间委托"></a>时间委托</h4><p>如onclick等是事件，事件委托是指本来在该元素上绑定的事件，利用别人来做，一般是它的父元素，优点是在比如一个<ul>下有多个<li>每个li元素要绑定一个点击后改变背景颜色事件，就要给每个元素元素绑定，但是利用时间委托只要绑定父元素，然后获取ev.target即可.还有一个优点是，如果动态添加li元素，后面加入的还有效<br>stopPropagation（）阻止事件冒泡</li></ul></p>
<p>jquery对象转js对象利用[index]或者get(index) 方法，dom对象转jquery,前面加$()</p>
<h4 id="CMD-AMD"><a href="#CMD-AMD" class="headerlink" title="CMD,AMD"></a>CMD,AMD</h4><p>CMD,commonjs,是服务器加载模块规范，nodejs就是采用这种规范，一个单独的文件就是一个模块，加载同步，前面的加载完成后面的才可以加载，浏览器采用AMD，非同步，</p>
<h4 id="csrf攻击"><a href="#csrf攻击" class="headerlink" title="csrf攻击"></a>csrf攻击</h4><p>利用别人的cookie缓存，伪装别人提交表单，这就需要伪装者发给a这个带有操作的图片，当a点击了这个图片，就会提交了</p>
<h4 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h4><p>cross-site-script,允许别人的代码运行在自己的网站上，o</p>
<h4 id="模块化工具的特点"><a href="#模块化工具的特点" class="headerlink" title="模块化工具的特点"></a>模块化工具的特点</h4><ol>
<li>灵活架构，功能分离，</li>
<li>多人协作</li>
<li>单元测试</li>
<li>追求更松的耦合度<h4 id="mvvm"><a href="#mvvm" class="headerlink" title="mvvm"></a>mvvm</h4></li>
</ol>
<p>双向绑定，view变动自动反应在model,真正将页面与逻辑数据分离，mvc中，    view仍然依赖model</p>
<h3 id="js-n进制转m进制"><a href="#js-n进制转m进制" class="headerlink" title="js n进制转m进制"></a>js n进制转m进制</h3><p>var bit = parseInt(1111,2); // 声明为2进制<br>bit.toString(10); //转为10进制</p>
<h4 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h4><h4 id="伪对象"><a href="#伪对象" class="headerlink" title="伪对象"></a>伪对象</h4><p>boolean,数字，字符串，有属性和方法</p>
<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">boolean.toString();</div><div class="line">number.toString();</div><div class="line">转换为数字</div><div class="line">paseInt(&apos;13432&apos;, 进制);</div><div class="line">paseFloat(&apos;212.dkf&apos;)//nan // 如果转换不成功返回NAN</div><div class="line">强制类型转换利用</div><div class="line">Boolean(&apos;hi&apos;); //true</div><div class="line">sting(null) ;  //&apos;null&apos;</div><div class="line">Sting.slice(top, end),切割字符串，从top 到 end</div></pre></td></tr></table></figure>
<h4 id="instanceof-typeof"><a href="#instanceof-typeof" class="headerlink" title="instanceof , typeof"></a>instanceof , typeof</h4><p>判断变量是否为空，或者是哪种类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> if(typeof a!=&quot;undefined&quot;)&#123;alert(&quot;ok&quot;)&#125;</div><div class="line">a instanceof b?alert(&quot;true&quot;):alert(&quot;false&quot;); //a是b的实例？真:假</div><div class="line"></div><div class="line">但 if (window instanceof Object) alert(&apos;Y&apos;);else alert(&apos;N&apos;);</div><div class="line">得&apos;N&apos;</div><div class="line">所以，这里的 instanceof 测试的 object 是指 js 语法中的 object，不是指 dom 模型对象。</div><div class="line">使用 typeof 会有些区别</div><div class="line">alert(typeof(window)) 会得 object</div></pre></td></tr></table></figure></p>
<p>typeof用于window是对象，但是instanceof不是</p>
<hr>
<h3 id="php-mysql-jquery-常见面试"><a href="#php-mysql-jquery-常见面试" class="headerlink" title="php,mysql,jquery 常见面试"></a>php,mysql,jquery 常见面试</h3><p>php:<br>mvc: model,view,controller中控制读取用户输入，model负责数据库交互</p>
<p>css有三种引入方式，一个外部，一个是内部定义，一个是内联</p>
<p>php不支持多重继承</p>
<p>get和post区别，get信息在url中，且传递数据有限，为1k，post更安全,无上限,修改php.ini的max_file_size</p>
<p>php 中获取图片大小方法<br>getImageSize(), ImageSx()获取宽度</p>
<p>php中的PEAR,即php extension and application repository,php功能扩展</p>
<p>php 定义常量<br>define(‘some’, 30);</p>
<p>不用按钮提交表单，在js中执行form.submit();</p>
<p>session,cookie,前者保存在服务器中，cookie保存在浏览器，都可以通过设定时间，每次请求都需要判断session，cookie是否存在，正确来获得用户的标志</p>
<p>数据库事务，就是一组数据库操作，要么失败，要么成功，如果一个失败，都会回滚，</p>
<p>print() 打印简单变量值，print_r()数组，对象等，echo ()字符串</p>
<p>版本管理工具，git,svn; 常用模板，smarty, blade</p>
<p>echo strrev($a); 字符串翻转</p>
<h4 id="数据库查询优化"><a href="#数据库查询优化" class="headerlink" title="数据库查询优化"></a>数据库查询优化</h4><p>使用join连接来代替子查询，索引，优化查询语句，建立外键</p>
<p>数据库读写分离：一般是写的压力小于读的压力，读库多个，写库一般一个，读库中存着经常被读的信息（一般是缓存系统），写库负责更新新增等，并同步数据到读库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//外键</div><div class="line">如一张表中保存着学生的id，成绩和身份信息，那么可以用外键将成绩和身份分为两个表，其中id作为两个的id，这样两表虽然独立，但是保留了数据的完整性，即操作就像只有一张表一样，但是查询速度更快.这时的规则是，主表的主键是外表的外键，但这个外表的外键不一定是它自己的主键。</div></pre></td></tr></table></figure>
<p>mysql获取当前时间now.date();</p>
<p>php 常用函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line">substr(string, start, length)// 字符串截取;w</div><div class="line">ord(string) //返回首个字符的ASCII值</div><div class="line">ord(substr(string,start, 1)) // 返回ASCII,如果大于0xa0则为中文码</div><div class="line">echo $_SERVER[&apos;REMOTE_ADDR&apos;] //输出客户端ip</div><div class="line">strlen($string);</div><div class="line">mb_substr() //中文截取无乱码 </div><div class="line"></div><div class="line">setCoolie(&apos;name&apos;, &apos;value&apos;) //设置cookie</div><div class="line">setCoolie(&apos;name&apos;, &apos;&apos;) //删除 coolie</div><div class="line">//必须把start放在第一句</div><div class="line">session_start();</div><div class="line">$_SESSION[name] = value;</div><div class="line">echo $_SESSION[name];    //使用session</div><div class="line">isset($_SESSION[name]);   // 判断</div><div class="line">unset($_SESSION[name]);   //删除</div><div class="line">session_destroy()；             //消耗所有session</div><div class="line"></div><div class="line">preg_match($rex, $string) //返回真假</div><div class="line">preg_replace($rex, $replace, $sting)将stirng中匹配的内容变为$replace</div><div class="line">strpos(&quot;$str Hello world!&quot;,&quot;world&quot;); //如果匹配world则返回world,不然就是false</div><div class="line"></div><div class="line">//获取url扩展名</div><div class="line">$path = parse_url($url);</div><div class="line">echo pathinfo($path[&apos;path&apos;],PATHINFO_EXTENSION);  //php</div><div class="line"></div><div class="line">//js重定向函数</div><div class="line">window.location.href = &apos;new href&apos;;</div><div class="line"></div><div class="line">$list = explode(&apos;/&apos;, $a) ;将字符串$a 分解为数组</div><div class="line">implode(&apos;&apos;, $arr);将数组合并为字符串</div><div class="line">strtolower($string) //字符串转小写</div><div class="line"></div><div class="line">p = i++ //先将i值给p再自加，</div><div class="line">p = ++i //先自加再给值</div><div class="line"></div><div class="line">//php读取网页</div><div class="line">$ctx = stream_context_create(array( &apos;http&apos; =&gt; array( &apos;timeout&apos; =&gt; 1</div><div class="line">file_get_contents(&apos;ww&apos;, 0 , $ctx);</div><div class="line"></div><div class="line">// php中魔术函数</div><div class="line">_construct, __destruct(), __call() //对象调用某个方法，如果不存在会调用该函数；__get() //读取对象的一个属性时，如果不存在会调用它，__set() // 设定一个属性值，如果不存在该属性，调用它。</div><div class="line"></div><div class="line">// 连接mysql</div><div class="line">$con = mysql_connect(&apos;local&apos;, &apos;root&apos;, &apos;pwe&apos;);</div><div class="line">$db = @mysql_select_db(&apos;DB&apos;, $con)</div><div class="line">$query = &apos;select * from user where name = &quot;you&quot;&apos;</div><div class="line">$results = mysql_fetch_row(mysql_query($query) ); //注意执行查询、操作用mysql_query()，处理结果集用mysql_fetch_row等</div><div class="line"></div><div class="line">mysql_query(&quot;INSERT INTO `user` (name,tel,content,date) VALUES      (&apos;小王&apos;,&apos;13254748547&apos;,&apos;高中毕业&apos;,&apos;2007-05-06&apos;)&quot;) </div><div class="line"></div><div class="line">mysql_query(&quot;UPDATE `user` SET date=&apos;&quot;.$nowDate.&quot;&apos; WHERE name=&apos;张山&apos;&quot;);</div><div class="line"></div><div class="line">mysql_query(&quot;DELETE FROM `user` WHERE name=&apos;张四&apos;&quot;);</div><div class="line"></div><div class="line">// create, insert, select, update, delete</div><div class="line">CREATE DATABASE database_name</div><div class="line"></div><div class="line">CREATE TABLE table_name</div><div class="line">(</div><div class="line">column_name1 data_type,</div><div class="line">column_name2 data_type,</div><div class="line">column_name3 data_type,</div><div class="line">.......</div><div class="line">)</div><div class="line"></div><div class="line">INSERT INTO table_name (column1, column2,...)</div><div class="line">VALUES (value1, value2,....)</div><div class="line"></div><div class="line">SELECT column_name(s) FROM table_name</div><div class="line"></div><div class="line">SELECT column FROM table</div><div class="line">WHERE column operator value</div><div class="line"></div><div class="line">//对记录排序</div><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">ORDER BY column_name</div><div class="line"></div><div class="line">UPDATE table_name</div><div class="line">SET column_name = new_value</div><div class="line">WHERE column_name = some_value</div><div class="line"></div><div class="line">DELETE FROM table_name</div><div class="line">WHERE column_name = some_value</div><div class="line"></div><div class="line"></div><div class="line">// 超全局</div><div class="line">$GLOBALS</div><div class="line">$_SERVER</div><div class="line">$_REQUEST</div><div class="line">$_POST</div><div class="line">$_GET</div><div class="line">$_FILES</div><div class="line">$_ENV</div><div class="line">$_COOKIE</div><div class="line">$_SESSION</div><div class="line"></div><div class="line">// 文件</div><div class="line">$myfile = fopen(&quot;webdictionary.txt&quot;, &quot;r&quot;) or die(&quot;Unable to open file!&quot;);</div><div class="line">echo fread($myfile,filesize(&quot;webdictionary.txt&quot;));</div><div class="line">fclose($myfile);</div><div class="line"></div><div class="line">$myfile = fopen(&quot;newfile.txt&quot;, &quot;w&quot;) or die(&quot;Unable to open file!&quot;);</div><div class="line">$txt = &quot;Bill Gates\n&quot;;</div><div class="line">fwrite($myfile, $txt);</div><div class="line">$txt = &quot;Steve Jobs\n&quot;;</div><div class="line">fwrite($myfile, $txt);</div><div class="line">fclose($myfile);</div></pre></td></tr></table></figure></p>
<p>include,遇到错误忽略，require遇到错误会停止，<br>include用到时加载,当再次执行文件时，会重新加载<br> require一开始加载，当再次执行该文件时，不会重新加载<br> _once,已经加载过的不会加载</p>
<p> heredoc是一种特殊字符串，可以设置自定义的标签，该标签内都是认为是一个字符串<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$str= &lt;&lt;&lt;SHOW</div><div class="line">my name is </div><div class="line">SHOW</div></pre></td></tr></table></figure></p>
<p> php ,asp,jsp局别，前者是免费的，后者是编译执行</p>
<p> php传值，复制值，引用，提高性能。</p>
<p> mysql_fetch_row()从结果集取出一行数组，作为枚举<br> mysql_fetch_array() 从结果集取出关联数组</p>
<p> GD库是一个处理图片的api库。，如缩略图，水印等。</p>
<h4 id="常见需求"><a href="#常见需求" class="headerlink" title="常见需求"></a>常见需求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">递归历遍目录，读取父目录，while输出所得子集的数组，while中判断是否为目录，如果为目录，则递归调用，如果不为，则输出，这里需要记住如果是. ..要忽略;w</div></pre></td></tr></table></figure>
<p>队列先进先出，堆栈先进后出</p>
<p>####判断不同客户端，如是手机还是电脑，以便呈现不同页面<br>user_agent , 判断网关等，</p>
<h4 id="php-错误处理"><a href="#php-错误处理" class="headerlink" title="php 错误处理"></a>php 错误处理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">if(!file_exists(&quot;welcome.txt&quot;))</div><div class="line"> &#123;</div><div class="line"> die(&quot;File not found&quot;);</div><div class="line"> &#125;</div><div class="line">else</div><div class="line"> &#123;</div><div class="line"> $file=fopen(&quot;welcome.txt&quot;,&quot;r&quot;);</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> // php内建了错误处理函数，可以自己建立一个错误处理函数，当发生错误时，调用自定义处理函数</div><div class="line"></div><div class="line">function customError($errno, $errstr)</div><div class="line"> &#123; </div><div class="line"> echo &quot;&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br /&gt;&quot;;</div><div class="line"> echo &quot;Ending Script&quot;;</div><div class="line"> die();</div><div class="line"> // 将处理函数设置为自定义的</div><div class="line"> set_error_handler(&quot;customError&quot;);&#125;</div><div class="line"></div><div class="line"> // 手动触发错误用</div><div class="line">trigger_error(&quot;Value must be 1 or below&quot;);</div></pre></td></tr></table></figure>
<p>php异常处理就是当错误发生时，会在此处中断，(即改变了函数正常的执行流程);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">throw new Execption(&apos;som&apos;);</div><div class="line">如果没有异常处理函数，则会发生报错，未处理的异常</div><div class="line"></div><div class="line">try &#123;  &#125; catch (Execption $e) &#123;  &#125; 可以处理异常</div></pre></td></tr></table></figure></p>
<h4 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;form action=&quot;upload_file.php&quot; method=&quot;post&quot;</div><div class="line">enctype=&quot;multipart/form-data&quot;&gt;</div><div class="line">&lt;label for=&quot;file&quot;&gt;Filename:&lt;/label&gt;</div><div class="line">&lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot; /&gt; </div><div class="line">&lt;br /&gt;</div><div class="line">&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</div><div class="line">&lt;/form&gt;</div><div class="line"></div><div class="line">if ((($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/gif&quot;)</div><div class="line">|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/jpeg&quot;)</div><div class="line">|| ($_FILES[&quot;file&quot;][&quot;type&quot;] == &quot;image/pjpeg&quot;))</div><div class="line">&amp;&amp; ($_FILES[&quot;file&quot;][&quot;size&quot;] &lt; 20000))</div><div class="line">  &#123;</div><div class="line">  if ($_FILES[&quot;file&quot;][&quot;error&quot;] &gt; 0)</div><div class="line">    &#123;</div><div class="line">    echo &quot;Return Code: &quot; . $_FILES[&quot;file&quot;][&quot;error&quot;] . &quot;&lt;br /&gt;&quot;;</div><div class="line">    &#125;</div><div class="line">  else</div><div class="line">    &#123;</div><div class="line">    echo &quot;Upload: &quot; . $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot;&lt;br /&gt;&quot;;</div><div class="line">    echo &quot;Type: &quot; . $_FILES[&quot;file&quot;][&quot;type&quot;] . &quot;&lt;br /&gt;&quot;;</div><div class="line">    echo &quot;Size: &quot; . ($_FILES[&quot;file&quot;][&quot;size&quot;] / 1024) . &quot; Kb&lt;br /&gt;&quot;;</div><div class="line">    echo &quot;Temp file: &quot; . $_FILES[&quot;file&quot;][&quot;tmp_name&quot;] . &quot;&lt;br /&gt;&quot;;</div><div class="line"></div><div class="line">    if (file_exists(&quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]))</div><div class="line">      &#123;</div><div class="line">      echo $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot; already exists. &quot;;</div><div class="line">      &#125;</div><div class="line">    else</div><div class="line">      &#123;</div><div class="line">      move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],</div><div class="line">      &quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]);</div><div class="line">      echo &quot;Stored in: &quot; . &quot;upload/&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;];</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">else</div><div class="line">  &#123;</div><div class="line">  echo &quot;Invalid file&quot;;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="xss攻击"><a href="#xss攻击" class="headerlink" title="xss攻击"></a>xss攻击</h4><p>利用网站漏洞，设法要网站运行自己想要的代码，一般需要把自己的代码写在http请求中，如url,表单域，常规思维是：提交带有自己代码的请求，然后服务器对请求进行解析，并且输出自己的代码，得到了运行。</p>
<p>这里有两种 ，如在表单域，比如自己的账号的文章中写带有恶意代码的<script>标签，然后提交，如果服务器不进行过滤，将会保存这份代码，当别人访问自己文章时，就会在它自己的浏览器渲染并输出代码，运行它，就达到了目的.<br><a href="http://blog.csdn.net/ghsau/article/details/17027893">参考</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 有php 代码</div><div class="line">&lt;?php </div><div class="line">echo $_GET[&apos;textaera&apos;];</div><div class="line"></div><div class="line">//在textaera域里面，输入&lt;script&gt; alert(&apos;coolie&apos;) &lt;/script&gt;则浏览器会解析代码并执行，达到了执行自己的代码</div><div class="line"></div><div class="line">1. 如有一个博客网站，我写了自己的文章，并赋了一些代码，然后提交，会保留在服务器上，这时别人浏览我的文章，需要解析并输出代码，这样就可以在他的浏览器运行了。</div></pre></td></tr></table></figure></p>
<h6 id="面试题升级"><a href="#面试题升级" class="headerlink" title="面试题升级"></a>面试题升级</h6><ol>
<li>数据结构和算法<br>数据结构有数组、链表、栈（用在递归）、队列（消息队列）<br>集合 : list set map<br>算法：冒泡排序、等</li>
<li><p>mysql 优化方法<br>使用not null，join的语句要索引，一行时limit 1，<br>前加explain一下select语句来判断<br>使用enum而不是varchar<br>垂直分表经常用和不经常用分开<br>水平分表，设定水平分表，动态取表等<br>读操作用myisam，写innodb</p>
</li>
<li><p>跳表是一种有序序列查询非常快的方案，以空间换时间</p>
</li>
<li>数组查找为O(1)，利于查找不利于增删，链表不利于查找，利于增删，哈希表是数组和链表的结合，有两者的优点<a href="http://www.cnblogs.com/xingzc/p/5765572.html">参考哈希表实现</a></li>
</ol>
<h5 id="php-高级面试题"><a href="#php-高级面试题" class="headerlink" title="php 高级面试题"></a>php 高级面试题</h5><ol>
<li>php多重继承，php不支持多重继承，一般不要去搞多重继承。多重继承是指一个类继承了多个父类，而php是可以一个类连续继承下去的即a extends b b extends c.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">interface a </div><div class="line">interface b</div><div class="line">class a1 implements a</div><div class="line">class a2 implements b</div><div class="line">class all extends a implements b 然后在all内继续定义一个实现b接口的方法，其实是简单在构造器内实例化a2，并调用它</div><div class="line"></div><div class="line">class GraduateStudent extends User implements TeacherInterface&#123;</div><div class="line">	private $teacher ;</div><div class="line">	public function __construct()&#123;</div><div class="line">		$this-&gt;teacher=new Teacher();</div><div class="line">	&#125;</div><div class="line">	public function getLengthOfService()&#123;</div><div class="line">		return $this-&gt;teacher-&gt;getLengthOfService();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####### php抽象类和接口区别</p>
<ol>
<li>抽象类里面至少拥有一个抽象方法，抽象类必须被子类继承并实现了所以方法后才可以实例化 </li>
<li>接口可以定义常量，但不建议这样</li>
<li>接口内只能定义为public</li>
<li>接口间可以相互继承，不能相互实现</li>
<li>在既需要接口，又需要实例变量和统一缺省方法的，就用抽象类</li>
</ol>
<p><a href="http://www.cnblogs.com/bluespot/p/4223056.html">高级面试题集合</a></p>
<ol>
<li>防sql注入方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mysql_escape_string(strip_tags($arr[&quot;$val&quot;]));</div><div class="line">或</div><div class="line">function post_check($post)&#123;</div><div class="line">if(!get_magic_quotes_gpc())&#123;// 判断magic_quotes_gpc是否为打开 </div><div class="line">$post = addslashes($post);// 进行magic_quotes_gpc没有打开的情况对提交数据的过滤 </div><div class="line">&#125;</div><div class="line">$post = str_replace(&quot;_&quot;,&quot;\_&quot;, $post);// 把 &apos;_&apos;过滤掉</div><div class="line">$post = str_replace(&quot;%&quot;,&quot;\%&quot;, $post);// 把 &apos;%&apos;过滤掉</div><div class="line">$post = nl2br($post);// 回车转换 </div><div class="line">$post = htmlspecialchars($post);// html标记转换 </div><div class="line"></div><div class="line">return $post;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h6 id="http-tcp"><a href="#http-tcp" class="headerlink" title="http/tcp"></a>http/tcp</h6><ol>
<li>https http，前者是加密传输，后者不加密，防窃听、防伪装</li>
<li>http协议请求分为 请求行（请求方法）、消息报头（各种accept）、请求正文；响应分为响应行（200等）、响应头（location）、响应正文</li>
<li><a href="http://www.cnblogs.com/royi123/archive/2013/06/14/3136702.html">深入浅出http</a></li>
</ol>
<p>####### 数据结构算法学习博客<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http://blog.csdn.net/column/details/xiu-note.html</div><div class="line">http://blog.csdn.net/oMengLiShuiXiang1234/article/details/51867800</div><div class="line">http://blog.csdn.net/omenglishuixiang1234/article/details/51234070</div></pre></td></tr></table></figure></p>
</script></p>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/interview/" data-id="cizut7q39000ot4ddjn1ucy6f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-inernet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/inernet/" class="article-date">
  <time datetime="2017-03-03T11:20:16.282Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/03/inernet/">学习网络的传递，数据包的路由，等一些列知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h5><ol>
<li><p>This HOWTO assumes that readers possess a prior understanding of basic networking concepts such as IP addresses, DNS names, netmasks, subnets, IP routing, routers, network interfaces, LANs, gateways, and firewall rules.</p>
</li>
<li><p>与，全真才是真，</p>
</li>
</ol>
<p>3, ipv4 地址分为32位，每一位都是0或者1.，ip = 网络号位+ 主机位.<br>子掩码是为了区分ip的网络号和主机号，<br>A 类ip : 8为网络号，(256种网络号，每个网络号下有2的24次方个主机号，也就 是A类网络可以容纳很多主机) ,</p>
<p>B 类 ，C 类， D类，</p>
<p>通过子网掩码可以划分子网，如A类ip，子网掩码是前8个1，后24个0 ，可以把子网掩码写成前9个1，后23个0 ，这样由任一网络号划分下来，都得到了两个新的网络号，利用子网掩码就可以区分。<br><a href="http://zhidao.baidu.com/question/474301179.html" target="_blank" rel="external">参考</a></p>
<ol>
<li>route: 目的地址，(可以有多个)</li>
<li>routing: 决定数据包到达每一个吓一跳的最好路径和转发接口，由一组三法来实现，这组算法就是路由协议(有静态[人工路由表], 和动态)</li>
<li>router : 路由器，可以储存route，并有操作系统来实现路由 协议</li>
<li>路由通告: 指路由器通过通告将自己的网段告诉其他路由设备，是目的地址的发起者或源</li>
<li>路由转发: 路由器根据目的地址将报文发给发起者或源(下一个路由器) </li>
<li>参考<a href="http://wenku.baidu.com/link?url=ccHCG38DsT77wtgvVIR5IVfLCAgcXU-RK3Gs4EYy-ifxaO22saHT9VL5AwotmQp4Drf67n9427X5Pm7pJHuZVmxlIzjFwYdbyu6OC9qEp4u" target="_blank" rel="external">华为基础教程</a> </li>
<li></li>
</ol>
<h5 id="https-协议理解"><a href="#https-协议理解" class="headerlink" title="https 协议理解"></a>https 协议理解</h5><p>http协议其实就是一个信息传送的过程，客户端(浏览器)向服务器发送一个请求url，服务器就根据url返回它要的信息</p>
<p>https 协议与它有些不一样，就是在于https多了个加密的过程： </p>
<p>浏览器发送 https请求到服务器443端口，服务器中保留着数字证书,数字证书其实就是一对公私钥匙，这时服务器向浏览器发一个公钥匙，这个公钥匙可以想象为一个锁头，浏览器可以用它锁住一个随机值，但是这个随机值只有服务器的唯一私钥匙才能解开，服务器拿到加密后的随机值皆可以对其解密，接着用这个解密后的随机值对称加密返回去的数据，</p>
<p>对称加密是指将数据通过私钥匙混在一起(这里私钥匙就是随机数),只有知道私钥匙才可以解开</p>
<p><a href="http://www.jb51.net/network/68135.html" target="_blank" rel="external">参考</a><br><a href="http://www.jb51.net/network/68135.html" target="_blank" rel="external">http://www.jb51.net/network/68135.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/inernet/" data-id="cizut7q3b000qt4ddv818nvuk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-image" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/image/" class="article-date">
  <time datetime="2017-03-03T11:20:16.282Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="使用php抠图"><a href="#使用php抠图" class="headerlink" title="使用php抠图"></a>使用php抠图</h5><hr>
<p>用php的gd库，imagick等，以及利用imagine面向对象库</p>
<p>######在建立php抠图之前，一定要有各种简洁的工具函数<br>如，设定容差，居中图片，图层等</p>
<h6 id="背景抠图算法"><a href="#背景抠图算法" class="headerlink" title="背景抠图算法"></a>背景抠图算法</h6><ol>
<li>一个个像素遍历</li>
<li>将颜色在容差内的像素点替换为想要颜色，或者使其透明</li>
<li>设定非扫描区域（如识别人脸、眼睛等），即制作选区</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/image/" data-id="cizut7q35000lt4ddes9wg2sw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-graduation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/graduation/" class="article-date">
  <time datetime="2017-03-03T11:20:16.280Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="毕业设计初稿，总结，大致主内容"><a href="#毕业设计初稿，总结，大致主内容" class="headerlink" title="毕业设计初稿，总结，大致主内容"></a>毕业设计初稿，总结，大致主内容</h4><hr>
<h5 id="主要用到了以下技术，从Edison到nodejs-sokect-io-再到-mysql设计，最后是后台页面-laravel"><a href="#主要用到了以下技术，从Edison到nodejs-sokect-io-再到-mysql设计，最后是后台页面-laravel" class="headerlink" title="主要用到了以下技术，从Edison到nodejs sokect.io 再到 mysql设计，最后是后台页面 + laravel"></a>主要用到了以下技术，从Edison到nodejs sokect.io 再到 mysql设计，最后是后台页面 + laravel</h5><ul>
<li>总体架构 : 图文,通信等</li>
<li><p>edison : 选型准则，和同类拥有啥优缺点，配置、介绍等基本信息,</p>
<ul>
<li>从硬件开始说起 edison vs 单片机; 本地设计语言c vs nodejs , 传感器选择 sensors vs i2c(套装vs 其他散买)执行器; 软件,编程语言，数据结构(json vs xml)，数据库(mysql vs moongodb)， 网络服务方案(双服务器), 数据通信接口方案(soap vs restful)，数据可视化图库,(ecahrts vs hinghtchart)</li>
</ul>
</li>
<li><p>开发语言 : nodejs 选型准则，支持异步，可以同时实现多个传感器信息并发采集，不用利用多线程。</p>
</li>
<li><p>安装edison,    </p>
</li>
<li>要收集的信息有 : co2, NH3, temp, humidity, voice, light; 主要收集逻辑: 每个传感器就是一个独立的个体类， 它的行为是: 采集 =&gt; 转化 =&gt; 判断是否处于某个值(低中高) =&gt; 设定当前环境状态 =&gt; 自我循环</li>
<li>需要控制的动作有 : 电机，电灯，加热棒，步进电机: 每个制动器都是独立的个体，依赖的是传感器采集状态来实现自我调整工作状态：查询传感器状态 =&gt; 逻辑确定自身运行状态 =&gt; 设定当前运行状态值 =&gt; 自我循环</li>
<li><em>如果更高明的，应该是触发循环，即只有一个或者少量触发信号使其循环，不过这样会使代码难以实现，而且可以思考一下，在c中怎么实现不同传感器和执行器之间的独立却又协同工作</em></li>
<li>传感器驱动制作 : i2c的时序问题，以及Edison的外围接口控制实现简介</li>
<li>实现本地数据保存 : 使用python 编程，为什么使用Python，以及代码逻辑 : 判断是否今天的工作簿子存在，如果存在就放置1，如果不存在就0，(还是得每次判断，不然机器不知道今天是否为明天，，，), =&gt; 创建excel =&gt; 写入excel; nodejs如果通过exec () 开子进程调用py代码</li>
<li>实现数据上传到ubidots,简介ubidots , 以及如何做它的数据接口客户端，以及界面截图，数据结构分析，怎样利用它的数据结构来实现自己的结构</li>
</ul>
<h5 id="以上是在本地系统的主要内容，下面是网络实时接口和服务器的搭建。"><a href="#以上是在本地系统的主要内容，下面是网络实时接口和服务器的搭建。" class="headerlink" title="以上是在本地系统的主要内容，下面是网络实时接口和服务器的搭建。"></a>以上是在本地系统的主要内容，下面是网络实时接口和服务器的搭建。</h5><ul>
<li>先讲解整体架构：要用到的内容进行简介，然后讲实现逻辑图,nodejs sokect.io  以及数据库设计，再讲解edsion和网页端如何通信 路由: 实时路由，以及多个图表路由，echarts解释</li>
<li>最后是laravel 逻辑和响应式网页的设计 : 查询历史， 添加传感器，系统管理</li>
</ul>
<h5 id="撰写规范"><a href="#撰写规范" class="headerlink" title="撰写规范"></a>撰写规范</h5><h5 id="摘要-文前内容"><a href="#摘要-文前内容" class="headerlink" title="摘要,文前内容"></a>摘要,文前内容</h5><p>简述物联网、农业、趋势、健康（系统设置的意义是为了提高产量和解决某种存在的问题，或者提高某种功能），然后说主要研究内容，如从选型到硬件到软件</p>
<h5 id="第一章，绪论-包括1-1前言，1-2现状，1-3-研究意义，1-4主要内容和设计目标"><a href="#第一章，绪论-包括1-1前言，1-2现状，1-3-研究意义，1-4主要内容和设计目标" class="headerlink" title="第一章，绪论,包括1.1前言，1.2现状，1.3 研究意义，1.4主要内容和设计目标"></a>第一章，绪论,包括1.1前言，1.2现状，1.3 研究意义，1.4主要内容和设计目标</h5><ol>
<li>前言是历史背景。</li>
<li>现状是国内外研究现状</li>
<li>因为存在影响和问题，所以要研究，如温湿度对生长环境有影响</li>
<li>主要研究内容，技术路线等。</li>
</ol>
<h5 id="第二章，-整个系统的总体设计"><a href="#第二章，-整个系统的总体设计" class="headerlink" title="第二章， 整个系统的总体设计"></a>第二章， 整个系统的总体设计</h5><ol>
<li>先说明整体架构</li>
<li>然后是总体选型,并不需要对每个东西进行比较。但要有图，以及参数图</li>
</ol>
<h5 id="第n章"><a href="#第n章" class="headerlink" title="第n章"></a>第n章</h5><ol>
<li>每一章都介绍一大块内容,标题是某某某设计,更多是讲解实现逻辑，以及贴少量代码，和要有程序框图.,最后是小结</li>
</ol>
<h5 id="结论与展望"><a href="#结论与展望" class="headerlink" title="结论与展望"></a>结论与展望</h5><h5 id="文献"><a href="#文献" class="headerlink" title="文献"></a>文献</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/graduation/" data-id="cizut7q38000nt4dd19xgu0gc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/03/yii/session/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/hexo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/winTips/">一些小技巧</a>
          </li>
        
          <li>
            <a href="/2017/03/03/win7Clean/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/webpack/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>