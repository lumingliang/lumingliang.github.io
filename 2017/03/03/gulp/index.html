<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="这里是前端工具gulp和webpack的基础用法学习
gulp ,automate and enhance my wokflow!
安装：npm install gulp-cli -g //全局安装cli
npm install gulp –save-dev //install gulp in current project, and save detail in package.json
创建g">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/2017/03/03/gulp/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="这里是前端工具gulp和webpack的基础用法学习
gulp ,automate and enhance my wokflow!
安装：npm install gulp-cli -g //全局安装cli
npm install gulp –save-dev //install gulp in current project, and save detail in package.json
创建g">
<meta property="og:updated_time" content="2016-04-15T03:06:47.056Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="这里是前端工具gulp和webpack的基础用法学习
gulp ,automate and enhance my wokflow!
安装：npm install gulp-cli -g //全局安装cli
npm install gulp –save-dev //install gulp in current project, and save detail in package.json
创建g">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-gulp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/gulp/" class="article-date">
  <time datetime="2017-03-03T11:20:16.280Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="这里是前端工具gulp和webpack的基础用法学习"><a href="#这里是前端工具gulp和webpack的基础用法学习" class="headerlink" title="这里是前端工具gulp和webpack的基础用法学习"></a>这里是前端工具gulp和webpack的基础用法学习</h4><hr>
<h5 id="gulp-automate-and-enhance-my-wokflow"><a href="#gulp-automate-and-enhance-my-wokflow" class="headerlink" title="gulp ,automate and enhance my wokflow!"></a>gulp ,automate and enhance my wokflow!</h5><ul>
<li>安装：npm install gulp-cli -g //全局安装cli</li>
<li>npm install gulp –save-dev //install gulp in current project, and save detail in package.json</li>
<li>创建gulpfile.js , 里面配置了所有gulp的工作，当前gulp会调用gulp自身和它的一些有用插件来自动完成所有工作</li>
</ul>
<h5 id="all-api-for-gulp-gulp-src-gulp-dest-gulp-task-gulp-watch"><a href="#all-api-for-gulp-gulp-src-gulp-dest-gulp-task-gulp-watch" class="headerlink" title="all api for gulp , gulp.src,gulp.dest, gulp.task, gulp.watch"></a>all api for gulp , gulp.src,gulp.dest, gulp.task, gulp.watch</h5><p>下面一一讲解这些api的用法</p>
<p>先看代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gulp.src(&apos;client/templates/*.jade&apos;) // 获取源文件(待处理文件)</div><div class="line">  .pipe(jade()) //通过pipe使文件作为输出，并输入给jade()处理后继续输出,这里实现了预编译jade语法的文件</div><div class="line">  .pipe(minify()) // 继续用minify处理,即压缩</div><div class="line">  .pipe(gulp.dest(&apos;build/minified_templates&apos;)); // gulp.dest输出到目的地</div></pre></td></tr></table></figure></p>
<p>上面代码jade,minify方法需要npm install plugin,然后参照plugin使用它，gulp只起到输入，输出，和整合调用其他插件的作用</p>
<p>gulp.src原型为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">gulp.src(globs[, options]) </div><div class="line">globs 一般是strings，或者strings 数组(即多个), 后面的options是附加设置</div><div class="line"></div><div class="line">// 如下目录</div><div class="line">client/</div><div class="line">  a.js</div><div class="line">  bob.js</div><div class="line">  bad.js</div><div class="line"></div><div class="line">gulp.src([&apos;client/*.js&apos;, &apos;!client/b*.js&apos;, &apos;client/bad.js&apos;]) // 只会匹配a.js, bad.js</div><div class="line"></div><div class="line">// options = &#123;</div><div class="line">	buffe: defualt(false) // 当为true时，读取文件将会以流steam形式，而不是全部读进缓冲区,这对读取大文件有用，但不是每个插件支持stream形式</div><div class="line">	read: true // 设置为flase会返回null,而且不会读取文件</div><div class="line">	base: &apos;string&apos; // 设置输出和输入 的路径问题，参考以下代码</div><div class="line">&#125;</div><div class="line"></div><div class="line">gulp.src(&apos;client/js/**/*.js&apos;) // </div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(&apos;build&apos;));  // Writes &apos;build/somedir/somefile.js&apos;</div><div class="line"></div><div class="line">gulp.src(&apos;client/js/**/*.js&apos;, &#123; base: &apos;client&apos; &#125;)</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(&apos;build&apos;));  // Writes &apos;build/js/somedir/somefile.js&apos;</div></pre></td></tr></table></figure></p>
<p>gulp.dest(path, [, options]) , path是在gulpfile目录基础下的子目录，如果没有就创建它,options取值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">options = &#123;</div><div class="line">	cwd: ?,</div><div class="line">	mode: 0777(默认),设定目录权限</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>gulp.task(name, [, deps, fn]), name是task的名字，deps是一个其他任务名数组，因为各个task之间是并发运行的，要保证当前task 在其他task之后运行就要把它写入数组中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gulp.task(&apos;mytask&apos;, [&apos;array&apos;, &apos;of&apos;, &apos;task&apos;, &apos;names&apos;], function() &#123;</div><div class="line">  // Do stuff</div><div class="line">&#125;); // 数组内的所有都会同时运行，mytask要在数组task后运行，需要数组内的任务正确使用promise等。</div><div class="line"></div><div class="line">以上所有的任务内容都是写在task回调中。</div></pre></td></tr></table></figure>
<p>异步task的写法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">// 使用回调</div><div class="line">// run a command in a shell</div><div class="line">var exec = require(&apos;child_process&apos;).exec;</div><div class="line">gulp.task(&apos;jekyll&apos;, function(cb) &#123;</div><div class="line">  // build Jekyll</div><div class="line">  exec(&apos;jekyll build&apos;, function(err) &#123;</div><div class="line">    if (err) return cb(err); // return error</div><div class="line">    cb(); // finished task</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 返回一个stream</div><div class="line">gulp.task(&apos;somename&apos;, function() &#123;</div><div class="line">  var stream = gulp.src(&apos;client/**/*.js&apos;)</div><div class="line">    .pipe(minify())</div><div class="line">    .pipe(gulp.dest(&apos;build&apos;));</div><div class="line">  return stream;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 返回一个promise</div><div class="line">var Q = require(&apos;q&apos;);</div><div class="line"></div><div class="line">gulp.task(&apos;somename&apos;, function() &#123;</div><div class="line">  var deferred = Q.defer();</div><div class="line"></div><div class="line">  // do async stuff</div><div class="line">  setTimeout(function() &#123;</div><div class="line">    deferred.resolve();</div><div class="line">  &#125;, 1);</div><div class="line"></div><div class="line">  return deferred.promise;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h5 id="任务互相依赖，如b依赖a的先完成，那么应该按照上面的异步写法写a-返回promise，等让gulp知道它什么时候完成，然后在b的options中声明依赖数组，gulp就自动知道了"><a href="#任务互相依赖，如b依赖a的先完成，那么应该按照上面的异步写法写a-返回promise，等让gulp知道它什么时候完成，然后在b的options中声明依赖数组，gulp就自动知道了" class="headerlink" title="任务互相依赖，如b依赖a的先完成，那么应该按照上面的异步写法写a,返回promise，等让gulp知道它什么时候完成，然后在b的options中声明依赖数组，gulp就自动知道了"></a>任务互相依赖，如b依赖a的先完成，那么应该按照上面的异步写法写a,返回promise，等让gulp知道它什么时候完成，然后在b的options中声明依赖数组，gulp就自动知道了</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var gulp = require(&apos;gulp&apos;);</div><div class="line"></div><div class="line">// takes in a callback so the engine knows when it&apos;ll be done</div><div class="line">gulp.task(&apos;one&apos;, function(cb) &#123;</div><div class="line">    // do stuff -- async or otherwise</div><div class="line">    cb(err); // if err is not null and not undefined, the run will stop, and note that it failed</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// identifies a dependent task must be complete before this one begins</div><div class="line">gulp.task(&apos;two&apos;, [&apos;one&apos;], function() &#123;</div><div class="line">    // task &apos;one&apos; is done now</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(&apos;default&apos;, [&apos;one&apos;, &apos;two&apos;]);</div></pre></td></tr></table></figure>
<h5 id="gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb"><a href="#gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb" class="headerlink" title="gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])"></a>gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])</h5><p>glob是要监测的文件(or file数组),opts是监测的行为，如’reload’, tasks当发生这些监测行为时要运行的任务，或者使用cb,当行为发生时要运行的cb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">cb(event) //cb中附带有event参数，可以读取发生该事件的上下文，如path, type</div><div class="line"></div><div class="line">gulp.watch(&apos;js/**/*.js&apos;, function(event) &#123;</div><div class="line">  console.log(&apos;File &apos; + event.path + &apos; was &apos; + event.type + &apos;, running tasks...&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">var watcher = gulp.watch(&apos;js/**/*.js&apos;, [&apos;uglify&apos;,&apos;reload&apos;]);</div><div class="line">watcher.on(&apos;change&apos;, function(event) &#123;</div><div class="line">  console.log(&apos;File &apos; + event.path + &apos; was &apos; + event.type + &apos;, running tasks...&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="gulp插件，所有的自动化行为大多依赖插件完成"><a href="#gulp插件，所有的自动化行为大多依赖插件完成" class="headerlink" title="gulp插件，所有的自动化行为大多依赖插件完成"></a>gulp插件，所有的自动化行为大多依赖插件完成</h5><p>以下说明主要有用插件<br>编译Sass (gulp-ruby-sass)<br>Autoprefixer (gulp-autoprefixer)<br>缩小化(minify)CSS (gulp-minify-css)<br>JSHint (gulp-jshint)<br>拼接 (gulp-concat)<br>丑化(Uglify) (gulp-uglify)<br>图片压缩 (gulp-imagemin)<br>即时重整(LiveReload) (gulp-livereload)<br>清理档案 (gulp-clean)<br>图片快取，只有更改过得图片会进行压缩 (gulp-cache)<br>更动通知 (gulp-notify)</p>
<p>// 安装插件命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-ruby-sass gulp-autoprefixer gulp-minify-css gulp-jshint gulp-concat gulp-uglify gulp-imagemin gulp-clean gulp-notify gulp-rename gulp-livereload gulp-cache --save-dev</div></pre></td></tr></table></figure></p>
<p>// 使用插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var gulp = require(&apos;gulp&apos;),  </div><div class="line">    sass = require(&apos;gulp-ruby-sass&apos;),</div><div class="line">    autoprefixer = require(&apos;gulp-autoprefixer&apos;),</div><div class="line">    minifycss = require(&apos;gulp-minify-css&apos;),</div><div class="line">    jshint = require(&apos;gulp-jshint&apos;),</div><div class="line">    uglify = require(&apos;gulp-uglify&apos;),</div><div class="line">    imagemin = require(&apos;gulp-imagemin&apos;),</div><div class="line">    rename = require(&apos;gulp-rename&apos;),</div><div class="line">    clean = require(&apos;gulp-clean&apos;),</div><div class="line">    concat = require(&apos;gulp-concat&apos;),</div><div class="line">    notify = require(&apos;gulp-notify&apos;),</div><div class="line">    cache = require(&apos;gulp-cache&apos;),</div><div class="line">    livereload = require(&apos;gulp-livereload&apos;);</div></pre></td></tr></table></figure></p>
<p>简单任务: 编译sass, 自动加入浏览器前缀，重命名，最小化压缩， <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">gulp.task(&apos;styles&apos;, function() &#123;  </div><div class="line">  return gulp.src(&apos;src/styles/main.scss&apos;)</div><div class="line">    .pipe(sass(&#123; style: &apos;expanded&apos; &#125;))</div><div class="line">    .pipe(autoprefixer(&apos;last 2 version&apos;, &apos;safari 5&apos;, &apos;ie 8&apos;, &apos;ie 9&apos;, &apos;opera 12.1&apos;, &apos;ios 6&apos;, &apos;android 4&apos;))</div><div class="line">    .pipe(gulp.dest(&apos;dist/assets/css&apos;))</div><div class="line">    .pipe(rename(&#123;suffix: &apos;.min&apos;&#125;))</div><div class="line">    .pipe(minifycss())</div><div class="line">    .pipe(gulp.dest(&apos;dist/assets/css&apos;))</div><div class="line">    .pipe(notify(&#123; message: &apos;Styles task complete&apos; &#125;));</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>jshint, 检查后压缩<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">gulp.task(&apos;scripts&apos;, function() &#123;  </div><div class="line">return gulp.src(&apos;src/scripts/**/*.js&apos;)</div><div class="line"> .pipe(jshint(&apos;.jshintrc&apos;))</div><div class="line"> .pipe(jshint.reporter(&apos;default&apos;))</div><div class="line"> .pipe(concat(&apos;main.js&apos;))</div><div class="line"> .pipe(gulp.dest(&apos;dist/assets/js&apos;))</div><div class="line"> .pipe(rename(&#123;suffix: &apos;.min&apos;&#125;))</div><div class="line"> .pipe(uglify())</div><div class="line"> .pipe(gulp.dest(&apos;dist/assets/js&apos;))</div><div class="line"> .pipe(notify(&#123; message: &apos;Scripts task complete&apos; &#125;));</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><a href="http://www.jianshu.com/p/3f2e13442555" target="_blank" rel="external">参考</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/03/gulp/" data-id="ciztqajj3000n48ddg6yulj57" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/03/03/inernet/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          学习网络的传递，数据包的路由，等一些列知识
        
      </div>
    </a>
  
  
    <a href="/2017/03/03/graduation/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/03/hexo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/win7Clean/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/winTips/">一些小技巧</a>
          </li>
        
          <li>
            <a href="/2017/03/03/webpack/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/03/03/weixin/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>